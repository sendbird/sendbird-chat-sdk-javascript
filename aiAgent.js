import{c as t,A as n,b6 as r,e as s,f as i,g as o,a as u,$ as l,_ as h,b as v,V as f,j as g,a2 as p,an as m,aM as _,t as y,u as k,aS as A,F as w}from"./lib/__bundle-bf8c7310.js";export{b7 as AIAgentInfo}from"./lib/__bundle-bf8c7310.js";import{C as T,a as q}from"./lib/__bundle-becd93d5.js";export{C as Conversation,e as ConversationChannelInfo,c as ConversationHandoff,d as ConversationResolution,a as ConversationStatus,b as ConversationType}from"./lib/__bundle-becd93d5.js";var I,S=function(e){function i(t){var i=t.aiAgentId,a=t.userId,o=t.language,u=t.country,c=t.context,l=t.forceCreateChannel,h=e.call(this)||this;return h.method=n.POST,h.path="".concat(r,"/ai_agents/").concat(encodeURIComponent(i),"/messenger_settings"),h.requireAuth=!1,h.params=s({user_id:a,country:u,language:o,context:c,force_create:l}),h}return t(i,e),i}(i),x=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.settings=n,r}return t(n,e),n}(o),M=function(e){function i(t){var i=this,a=t.token,o=t.limit,u=t.aiAgentId,c=t.status,l=t.reverse,h=t.order;return(i=e.call(this)||this).method=n.GET,i.path="".concat(r,"/my_conversations"),i.params=s({token:a,limit:o,reverse:l,order:h,status:c,bot_userid:u}),i}return t(i,e),i}(i),Q=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.conversations=[];var s=n.next_token,i=n.conversations;return r.token=s,i&&i.length>0&&(r.conversations=i.map((function(t){return new T(t)}))),r}return t(n,e),n}(o),P={limit:10},D=function(e){function i(t){var i=this,a=t.limit,o=void 0===a?P.limit:a,u=t.keys,c=t.token;return(i=e.call(this)||this).method=n.GET,i.path="".concat(r,"/sdk_message_templates"),i.params=s({limit:o,keys:u,token:c}),i}return t(i,e),i}(i),E=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=n.templates,i=n.template_list_token;return r.token=i,r.templates=s.map((function(t){return{template:JSON.stringify(t)}})),r}return t(n,e),n}(o),j=function(e){function s(t){var s=this,i=t.key;return(s=e.call(this)||this).method=n.GET,s.path="".concat(r,"/sdk_message_templates/").concat(i),s}return t(s,e),s}(i),L=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.template=JSON.stringify(n),r}return t(n,e),n}(o),N={},R=function(){function t(t,e){var n=e.sdkState,r=e.requestQueue,s=e.logger;this._iid=t,this._sdkState=n,this._requestQueue=r,this._logger=s,N[t]=this}return t.of=function(t){return N[t]},t.prototype.requestMessengerSettings=function(t){return h(this,void 0,void 0,(function(){var e,n,r;return v(this,(function(s){switch(s.label){case 0:return e=f.of(this._iid).requestQueue,n=new S(t),[4,e.commandRouter.send(n)];case 1:return r=s.sent(),[2,r.as(x).settings]}}))}))},t.prototype.getConversations=function(t,e,n){return h(this,void 0,void 0,(function(){var r,s,i,a,o,u;return v(this,(function(c){switch(c.label){case 0:return r=f.of(this._iid).requestQueue,s=new M(g(g({},e),{token:t,limit:n})),[4,r.send(s)];case 1:return i=c.sent(),a=i.as(Q),o=a.conversations,u=a.token,[2,{conversations:o,token:u}]}}))}))},t.prototype.getMessageTemplates=function(t){return void 0===t&&(t={}),h(this,void 0,void 0,(function(){var e,n,r,s,i,a,o;return v(this,(function(u){switch(u.label){case 0:return e=t.keys,n=t.limit,r=new D({keys:e,limit:n}),[4,this._requestQueue.send(r)];case 1:return s=u.sent(),i=s.as(E),a=i.templates,o=i.token,[2,{templates:a,token:o}]}}))}))},t.prototype.getMessageTemplate=function(t){return h(this,void 0,void 0,(function(){var e,n;return v(this,(function(r){switch(r.label){case 0:return e=new j({key:t}),[4,this._requestQueue.send(e)];case 1:return n=r.sent(),[2,{template:n.as(L).template}]}}))}))},t}();!function(t){t.CREATED_AT="created_at",t.UPDATED_AT="updated_at"}(I||(I={}));var G={status:void 0,aiAgentId:void 0,reverse:!1,order:I.UPDATED_AT},O=function(e){function n(t,n){var r,s,i,a,o=this;return(o=e.call(this,t,n)||this).status=null!==(r=n.status)&&void 0!==r?r:void 0,o.aiAgentId=null!==(s=n.aiAgentId)&&void 0!==s?s:void 0,o.reverse=null!==(i=n.reverse)&&void 0!==i?i:G.reverse,o.order=null!==(a=n.order)&&void 0!==a?a:G.order,o}return t(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&p(q,this.status,!0)&&u("string",this.aiAgentId,!0)&&u("boolean",this.reverse)&&p(I,this.order)},n.prototype.serialize=function(){return m(this)},n.prototype.next=function(){return h(this,void 0,void 0,(function(){var t,e,n,r;return v(this,(function(s){switch(s.label){case 0:return t=R.of(this._iid),this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,t.getConversations(this._token,k(g({},this)),this.limit)]):[3,2]:[3,5];case 1:return e=s.sent(),n=e.conversations,r=e.token,this._token=r,this._hasNext=!!r,this._isLoading=!1,[2,n];case 2:return[2,[]];case 3:throw y.queryInProgress;case 4:return[3,6];case 5:throw y.invalidParameters;case 6:return[2]}}))}))},n}(_),U=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="aiAgent",t}return t(n,e),n.prototype.init=function(t,n){var r=n.sdkState,s=n.dispatcher,i=n.sessionManager,a=n.requestQueue,o=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:s,sessionManager:i,requestQueue:a,logger:o,onlineDetector:u,cacheContext:c}),this._manager=new R(t,{sdkState:r,requestQueue:a,logger:o})},n.prototype.requestMessengerSettings=function(t){return h(this,void 0,void 0,(function(){var e,n,r,s,i,a;return v(this,(function(o){return e=t.aiAgentId,n=t.userId,r=t.language,s=t.country,i=t.context,a=t.forceCreateChannel,w(u("string",e)&&u("string",n,!0)&&u("string",r,!0)&&u("string",s,!0)&&u("object",i,!0)&&u("boolean",a,!0)).throw(y.invalidParameters),[2,this._manager.requestMessengerSettings(t)]}))}))},n.prototype.createConversationListQuery=function(t){return void 0===t&&(t={}),new O(this._iid,t)},n.prototype.getMessageTemplates=function(t){return void 0===t&&(t={}),h(this,void 0,void 0,(function(){var e;return v(this,(function(n){return e=g(g({},P),t),w(function(t){return u("number",t.limit,!0)&&l("string",t.keys,!0)}(e)).throw(y.invalidParameters),[2,this._manager.getMessageTemplates(t)]}))}))},n.prototype.getMessageTemplate=function(t){return h(this,void 0,void 0,(function(){return v(this,(function(e){return w(u("string",t)).throw(y.invalidParameters),[2,this._manager.getMessageTemplate(t)]}))}))},n}(A);export{U as AIAgentModule,I as ConversationListOrder,O as ConversationListQuery};
