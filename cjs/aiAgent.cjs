Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./lib/__bundle-f91e640d.cjs"),t=require("./lib/__bundle-1970951c.cjs");require("./lib/__bundle-e74aae4e.cjs"),require("./lib/__bundle-699834cc.cjs"),require("./lib/__bundle-93aff2b2.cjs"),require("./lib/__bundle-dae7bdf2.cjs"),require("./lib/__bundle-f66fd3ee.cjs");class n extends e.APIRequestCommand{constructor({aiAgentId:t,userId:n,language:s,country:i,context:r,forceCreateChannel:a,knownActiveChannelUrl:o,shouldSendFirstMessage:l}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT}/ai_agents/${encodeURIComponent(t)}/messenger_settings`,this.requireAuth=!1,this.params=e.deundefined({user_id:n,country:i,language:s,context:r,force_create:a,known_active_channel_url:o,should_send_first_message:l})}}class s extends e.APIResponseCommand{constructor(e,t){super(e,t),this.settings=t}}class i extends e.APIRequestCommand{constructor(t){const{token:n,limit:s,aiAgentId:i,status:r,reverse:a,order:o}=t;super(),this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_AI_AGENT}/my_conversations`,this.params=e.deundefined({token:n,limit:s,reverse:a,order:o,status:r,bot_userid:i})}}class r extends e.APIResponseCommand{constructor(e,n){super(e,n),this.conversations=[];const{next_token:s,conversations:i}=n;this.token=s,i&&i.length>0&&(this.conversations=i.map((e=>new t.Conversation(e))))}}const a={limit:10};class o extends e.APIRequestCommand{constructor(t){const{limit:n=a.limit,keys:s,token:i}=t;super(),this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_AI_AGENT}/sdk_message_templates`,this.params=e.deundefined({limit:n,keys:s,token:i})}}class l extends e.APIResponseCommand{constructor(e,t){super(e,t);const{templates:n,template_list_token:s}=t;this.token=s,this.templates=n.map((e=>({template:JSON.stringify(e)})))}}class d extends e.APIRequestCommand{constructor(t){const{key:n}=t;super(),this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_AI_AGENT}/sdk_message_templates/${n}`}}class u extends e.APIResponseCommand{constructor(e,t){super(e,t),this.template=JSON.stringify(t)}}var h,c;exports.AIAgentChannelFilter=void 0,(h=exports.AIAgentChannelFilter||(exports.AIAgentChannelFilter={})).INCLUDE="include",h.EXCLUDE="exclude",exports.DeskChannelFilter=void 0,(c=exports.DeskChannelFilter||(exports.DeskChannelFilter={})).INCLUDE="include",c.EXCLUDE="exclude";const p={aiAgentChannelFilter:exports.AIAgentChannelFilter.INCLUDE,aiAgentConversationStatusFilter:[t.ConversationStatus.OPEN,t.ConversationStatus.CLOSED],aiAgentIds:[],deskChannelFilter:exports.DeskChannelFilter.INCLUDE,pinnedChannelUrls:[],copilotConversationOnly:!1,copilotSupportChannelUrl:void 0};class g extends e.APIRequestCommand{constructor(t){super();const{aiAgentChannelFilter:n,aiAgentIds:s,deskChannelFilter:i,aiAgentConversationStatusFilter:r,pinnedChannelUrls:a,copilotConversationOnly:o,copilotSupportChannelUrl:l,userId:d,token:u,limit:h}=Object.assign(Object.assign({},p),t);this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_AI_AGENT_USERS}/${encodeURIComponent(d)}/my_group_channels`,this.params=e.deundefined({token:u,limit:h,ai_agent_channel_filter:n,desk_channel_filter:i,copilot_conversation_only:o,copilot_support_channel_url:l}),r&&r.length>0&&(this.params.ai_agent_conversation_status_filter=r),s&&s.length>0&&(this.params.ai_agent_ids=s),a&&a.length>0&&(this.params.pinned_channel_urls=a)}}class m extends e.APIResponseCommand{constructor(e,n){super(e,n),this.channels=[];const{next:s,channels:i,ts:r}=n;this.token=s,i&&i.length>0&&(this.channels=i.map((n=>(n.ts=r,new t.GroupChannel(e,n))))),this.ts=null!=r?r:0}}const _={aiAgentChannelFilter:exports.AIAgentChannelFilter.INCLUDE,aiAgentIds:[],deskChannelFilter:exports.DeskChannelFilter.INCLUDE,pinnedChannelUrls:[],copilotConversationOnly:!1,copilotSupportChannelUrl:void 0},C=t=>e.isEnumOf(exports.AIAgentChannelFilter,t.aiAgentChannelFilter,!0)&&e.isArrayOf("string",t.aiAgentIds,!0)&&e.isEnumOf(exports.DeskChannelFilter,t.deskChannelFilter,!0)&&e.isArrayOf("string",t.pinnedChannelUrls,!0)&&e.isTypeOf("boolean",t.copilotConversationOnly,!0)&&e.isTypeOf("string",t.copilotSupportChannelUrl,!0);class A extends e.APIRequestCommand{constructor({userId:t,ts:n,token:s,params:i}){super();const{aiAgentChannelFilter:r,aiAgentIds:a,deskChannelFilter:o,pinnedChannelUrls:l,copilotConversationOnly:d,copilotSupportChannelUrl:u}=Object.assign(Object.assign({},_),i);this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_AI_AGENT_USERS}/${encodeURIComponent(t)}/my_group_channels/changelogs`,this.params=e.deundefined({token:s,change_ts:n,ai_agent_channel_filter:r,desk_channel_filter:o,copilot_conversation_only:d,copilot_support_channel_url:u}),a&&a.length>0&&(this.params.ai_agent_ids=a),l&&l.length>0&&(this.params.pinned_channel_urls=l)}}class v extends e.APIResponseCommand{constructor(e,n){super(e,n),this.updatedChannels=n.updated.map((s=>{const i=Object.assign(s,{ts:n.ts});return new t.GroupChannel(e,i)})),this.deletedChannelUrls=n.deleted,this.hasMore=n.has_more,this.token=n.next,this.ts=n.ts}}const f={aiAgentChannelFilter:exports.AIAgentChannelFilter.INCLUDE,aiAgentConversationStatusFilter:[t.ConversationStatus.OPEN,t.ConversationStatus.CLOSED],aiAgentIds:[],deskChannelFilter:exports.DeskChannelFilter.INCLUDE,pinnedChannelUrls:[],copilotConversationOnly:!1,copilotSupportChannelUrl:void 0};class I extends e.APIRequestCommand{constructor({userId:t,params:n}){super();const{aiAgentChannelFilter:s,aiAgentConversationStatusFilter:i,aiAgentIds:r,deskChannelFilter:a,pinnedChannelUrls:o,copilotConversationOnly:l,copilotSupportChannelUrl:d}=Object.assign(Object.assign({},f),n);this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_AI_AGENT_USERS}/${encodeURIComponent(t)}/my_group_channels/unread_message_count`,this.params=e.deundefined({ai_agent_channel_filter:s,desk_channel_filter:a,copilot_conversation_only:l,copilot_support_channel_url:d}),i&&i.length>0&&(this.params.ai_agent_conversation_status_filter=i),r&&r.length>0&&(this.params.ai_agent_ids=r),o&&o.length>0&&(this.params.pinned_channel_urls=o)}}class y extends e.APIResponseCommand{constructor(e,t){super(e,t),this.total=t.total,this.aiAgentChannelCount=t.ai_agent_channel,this.deskChannelCount=t.desk_channel,this.pinnedChannel=t.pinned_channel.map((e=>({channelUrl:e.channel_url,count:e.count})))}}class O extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,key:s,data:i}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/forms/${encodeURIComponent(s)}/submit`,this.params=e.deundefined(e.undefineNullProps({data:i}))}}class U extends e.APIResponseCommand{constructor(e,t){super(e,t),this.result=null!=t?t:{}}}class P extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,key:s}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/forms/${encodeURIComponent(s)}/cancel`,this.params={}}}class T extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,key:s,channel:i,data:r}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/otps/${encodeURIComponent(s)}/request`,this.params=e.deundefined(e.undefineNullProps({channel:i,data:r}))}}class E extends e.APIResponseCommand{constructor(e,t){super(e,t),this.result=null!=t?t:{}}}class k extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,key:s,code:i}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/otps/${encodeURIComponent(s)}/verify`,this.params=e.deundefined(e.undefineNullProps({code:i}))}}class b extends e.APIResponseCommand{constructor(e,t){super(e,t),this.result=null!=t?t:{}}}class S extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,key:s}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/otps/${encodeURIComponent(s)}/cancel`,this.params={}}}class x extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,rating:s,comment:i}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/feedback`,this.params=e.deundefined(e.undefineNullProps({rating:s,comment:i}))}}class R extends e.APIResponseCommand{constructor(e,t){super(e,t),this.id=t.id,this.rating=t.rating,this.comment=t.comment}}class w extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,rating:s,comment:i}){super(),this.method=e.APIRequestMethod.PUT,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/feedback`,this.params=e.deundefined(e.undefineNullProps({rating:s,comment:i}))}}class F extends e.APIResponseCommand{constructor(e,t){super(e,t),this.id=t.id,this.rating=t.rating,this.comment=t.comment}}class q extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n}){super(),this.method=e.APIRequestMethod.DELETE,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/feedback`,this.params={}}}class M extends e.APIRequestCommand{constructor({channelUrl:t,messageId:n,status:s,detail:i}){super(),this.method=e.APIRequestMethod.POST,this.path=`${e.API_PATH_AI_AGENT_GROUP_CHANNELS}/${encodeURIComponent(t)}/messages/${encodeURIComponent(n)}/user_action_messages`,this.params={status:s,detail:null!=i?i:""}}}const N={};class L{constructor(t,{sdkState:n,requestQueue:s,logger:i,dispatcher:r}){this._iid=t,this._sdkState=n,this._requestQueue=s,this._logger=i,this._dispatcher=r,this._aiAgentHandlers=new Map,this._dispatcher.on((t=>{t instanceof e.WebSocketEventCommand&&this._handleEvent(t).catch((t=>{if(e.isThrowingOutside(t)&&"foreground"===this._sdkState.appState)throw t}))})),N[t]=this}_handleEvent(t){return e.__awaiter(this,void 0,void 0,(function*(){"AIEV"===t.code&&e.runAsCallback((()=>e.__awaiter(this,void 0,void 0,(function*(){this._aiAgentHandlers.forEach((e=>{e(t.payload)}))}))))}))}static of(e){return N[e]}get handlers(){return[...this._aiAgentHandlers.values()]}addEventHandler(e,t){this._aiAgentHandlers.set(e,t)}removeEventHandler(e){this._aiAgentHandlers.delete(e)}clearEventHandler(){this._aiAgentHandlers.clear()}requestMessengerSettings(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:i}=e.Vault.of(this._iid),r=new n(t),a=yield i.forceSend(r),{settings:o}=a.as(s);return o}))}getConversations(t,n,s){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:a}=e.Vault.of(this._iid),o=new i(Object.assign(Object.assign({},n),{token:t,limit:s})),l=yield a.send(o),{conversations:d,token:u}=l.as(r);return{conversations:d,token:u}}))}getMessageTemplates(t={}){return e.__awaiter(this,void 0,void 0,(function*(){const{keys:e,limit:n}=t,s=new o({keys:e,limit:n}),i=yield this._requestQueue.send(s),{templates:r,token:a}=i.as(l);return{templates:r,token:a}}))}getMessageTemplate(t){return e.__awaiter(this,void 0,void 0,(function*(){const e=new d({key:t}),n=yield this._requestQueue.send(e),{template:s}=n.as(u);return{template:s}}))}getMyGroupChannels(n,s,i,r=e.CollectionEventSource.REQUEST_CHANNEL){return e.__awaiter(this,void 0,void 0,(function*(){const e=new g(Object.assign(Object.assign({},s),{userId:this._sdkState.userId,token:n,limit:i})),a=yield this._requestQueue.send(e),{channels:o,token:l,ts:d}=a.as(m);return this._dispatcher.dispatch(new t.GroupChannelUpdateEventCommand({channels:o,context:{source:r}})),{channels:o,token:l,ts:d}}))}getMyGroupChannelChangeLogs(n,s,i=e.CollectionEventSource.REQUEST_CHANNEL_CHANGELOGS){return e.__awaiter(this,void 0,void 0,(function*(){const r="string"==typeof n?n:null,a="number"==typeof n?n:null,o=new A(e.undefineNullProps({userId:this._sdkState.userId,ts:a,token:r,params:s})),l=(yield this._requestQueue.send(o)).as(v),{updatedChannels:d,deletedChannelUrls:u,hasMore:h,ts:c}=l;return d.length>0&&this._dispatcher.dispatch(new t.GroupChannelUpdateEventCommand({channels:d,context:{source:i},ts:c})),u.length>0&&this._dispatcher.dispatch(new t.GroupChannelRemoveEventCommand({channelUrls:u,context:{source:i}})),{updatedChannels:d,deletedChannelUrls:u,hasMore:h,token:l.token}}))}getUnreadMessageCount(t){return e.__awaiter(this,void 0,void 0,(function*(){const e=new I({userId:this._sdkState.userId,params:t}),n=yield this._requestQueue.send(e),{total:s,aiAgentChannelCount:i,deskChannelCount:r,pinnedChannel:a}=n.as(y);return{total:s,aiAgentChannelCount:i,deskChannelCount:r,pinnedChannel:a}}))}submitForm(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new O({channelUrl:t.channelUrl,messageId:t.messageId,key:t.formKey,data:t.formData}),i=yield n.send(s),{result:r}=i.as(U);return r}))}cancelForm(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new P({channelUrl:t.channelUrl,messageId:t.messageId,key:t.formKey});yield n.send(s)}))}requestOTP(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new T({channelUrl:t.channelUrl,messageId:t.messageId,key:t.otpKey,channel:t.otpChannel,data:t.otpData}),i=yield n.send(s),{result:r}=i.as(E);return r}))}verifyOTP(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new k({channelUrl:t.channelUrl,messageId:t.messageId,key:t.otpKey,code:t.code}),i=yield n.send(s),{result:r}=i.as(b);return r}))}cancelOTP(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new S({channelUrl:t.channelUrl,messageId:t.messageId,key:t.otpKey});yield n.send(s)}))}createMessageFeedback(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new x({channelUrl:t.channelUrl,messageId:t.messageId,rating:t.rating,comment:t.comment}),i=(yield n.send(s)).as(R);return{id:i.id,rating:i.rating,comment:i.comment}}))}updateMessageFeedback(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new w({channelUrl:t.channelUrl,messageId:t.messageId,rating:t.rating,comment:t.comment}),i=(yield n.send(s)).as(F);return{id:i.id,rating:i.rating,comment:i.comment}}))}deleteMessageFeedback(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new q({channelUrl:t.channelUrl,messageId:t.messageId});yield n.send(s)}))}submitUserActionMessage(t){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:n}=e.Vault.of(this._iid),s=new M({channelUrl:t.channelUrl,messageId:t.messageId,status:t.status,detail:t.detail});yield n.send(s)}))}updateContext(n,s,i){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:r}=e.Vault.of(this._iid),a=new t.AIAgentUpdateContextRequestCommand({aiAgentId:n,channelUrl:s,context:i}),o=yield r.send(a),{contextObject:l}=o.as(t.AIAgentUpdateContextResponseCommand);return l}))}patchContext(n,s,i){return e.__awaiter(this,void 0,void 0,(function*(){const{requestQueue:r}=e.Vault.of(this._iid),a=new t.AIAgentPatchContextRequestCommand({aiAgentId:n,channelUrl:s,context:i}),o=yield r.send(a),{contextObject:l}=o.as(t.AIAgentPatchContextResponseCommand);return l}))}}var G;exports.ConversationListOrder=void 0,(G=exports.ConversationListOrder||(exports.ConversationListOrder={})).CREATED_AT="created_at",G.UPDATED_AT="updated_at";const H={status:void 0,aiAgentId:void 0,reverse:!1,order:exports.ConversationListOrder.UPDATED_AT};class $ extends e.BaseListQuery{constructor(e,t){var n,s,i,r;super(e,t),this.status=null!==(n=t.status)&&void 0!==n?n:void 0,this.aiAgentId=null!==(s=t.aiAgentId)&&void 0!==s?s:void 0,this.reverse=null!==(i=t.reverse)&&void 0!==i?i:H.reverse,this.order=null!==(r=t.order)&&void 0!==r?r:H.order}_validate(){return super._validate()&&e.isEnumOf(t.ConversationStatus,this.status,!0)&&e.isTypeOf("string",this.aiAgentId,!0)&&e.isTypeOf("boolean",this.reverse)&&e.isEnumOf(exports.ConversationListOrder,this.order)}serialize(){return e.serialize(this)}next(){return e.__awaiter(this,void 0,void 0,(function*(){const t=L.of(this._iid);if(this._validate()){if(this._isLoading)throw e.SendbirdError.queryInProgress;if(this._hasNext){this._isLoading=!0;const{conversations:n,token:s}=yield t.getConversations(this._token,e.undefineNullProps(Object.assign({},this)),this.limit);return this._token=s,this._hasNext=!!s,this._isLoading=!1,n}return[]}throw e.SendbirdError.invalidParameters}))}}class D extends e.BaseListQuery{constructor(e,t){super(e,t),this._ts=0,this.aiAgentChannelFilter=p.aiAgentChannelFilter,this.aiAgentIds=p.aiAgentIds,this.deskChannelFilter=p.deskChannelFilter,this.pinnedChannelUrls=p.pinnedChannelUrls,this.copilotConversationOnly=p.copilotConversationOnly,this.copilotSupportChannelUrl=p.copilotSupportChannelUrl,t.aiAgentChannelFilter&&(this.aiAgentChannelFilter=t.aiAgentChannelFilter),t.aiAgentConversationStatusFilter&&(this.aiAgentConversationStatusFilter=t.aiAgentConversationStatusFilter),t.aiAgentIds&&(this.aiAgentIds=t.aiAgentIds),t.deskChannelFilter&&(this.deskChannelFilter=t.deskChannelFilter),t.pinnedChannelUrls&&(this.pinnedChannelUrls=t.pinnedChannelUrls),t.copilotConversationOnly&&(this.copilotConversationOnly=t.copilotConversationOnly),t.copilotSupportChannelUrl&&(this.copilotSupportChannelUrl=t.copilotSupportChannelUrl)}_validate(){return super._validate()&&e.isEnumOf(exports.AIAgentChannelFilter,this.aiAgentChannelFilter)&&e.isArrayOf(t.ConversationStatus,this.aiAgentConversationStatusFilter,!0)&&e.isArrayOf("string",this.aiAgentIds)&&e.isEnumOf(exports.DeskChannelFilter,this.deskChannelFilter)&&e.isArrayOf("string",this.pinnedChannelUrls)&&e.isTypeOf("boolean",this.copilotConversationOnly,!0)&&e.isTypeOf("string",this.copilotSupportChannelUrl,!0)}serialize(){return e.serialize(this)}get lastResponseAt(){return this._ts}belongsTo(e){if(this.pinnedChannelUrls.includes(e.url))return!0;if(e.isAIAgent){if(!e.conversation)return!1;if(this.aiAgentChannelFilter===exports.AIAgentChannelFilter.EXCLUDE)return!1;if(!this.aiAgentIds.includes(e.conversation.aiAgentId))return!1;if(this.aiAgentConversationStatusFilter){if(!this.aiAgentConversationStatusFilter.some((t=>{var n;return(null===(n=e.conversation)||void 0===n?void 0:n.status)===t})))return!1}return!0}return!!e.isDesk&&this.deskChannelFilter!==exports.DeskChannelFilter.EXCLUDE}next(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._validate()){if(this._isLoading)throw e.SendbirdError.queryInProgress;if(this._hasNext){this._isLoading=!0;const t=L.of(this._iid),n=e.undefineNullProps({aiAgentChannelFilter:this.aiAgentChannelFilter,aiAgentConversationStatusFilter:this.aiAgentConversationStatusFilter,aiAgentIds:this.aiAgentIds,deskChannelFilter:this.deskChannelFilter,pinnedChannelUrls:this.pinnedChannelUrls,copilotConversationOnly:this.copilotConversationOnly,copilotSupportChannelUrl:this.copilotSupportChannelUrl}),{channels:s,token:i,ts:r}=yield t.getMyGroupChannels(this._token,n,this.limit);return this._token=i,this._hasNext=!!i,this._isLoading=!1,this._ts=r,s}return[]}throw e.SendbirdError.invalidParameters}))}}var j;exports.AIAgentMessageFeedbackRating=void 0,(j=exports.AIAgentMessageFeedbackRating||(exports.AIAgentMessageFeedbackRating={})).GOOD="good",j.BAD="bad";class Q extends e.Module{constructor(){super(...arguments),this.name="aiAgent"}init(e,{sdkState:t,dispatcher:n,sessionManager:s,requestQueue:i,logger:r,onlineDetector:a,cacheContext:o}){super.init(e,{sdkState:t,dispatcher:n,sessionManager:s,requestQueue:i,logger:r,onlineDetector:a,cacheContext:o}),this._manager=new L(e,{sdkState:t,requestQueue:i,logger:r,dispatcher:n})}addEventHandler(t,n){e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.addEventHandler(t,n)}removeEventHandler(t){e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.removeEventHandler(t)}removeAllEventHandlers(){this._manager.clearEventHandler()}updateContext(t,n,s){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t)&&e.isTypeOf("string",n)&&e.isTypeOf("object",s)).throw(e.SendbirdError.invalidParameters),this._manager.updateContext(t,n,s)}))}patchContext(t,n,s){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t)&&e.isTypeOf("string",n)&&e.isTypeOf("object",s)).throw(e.SendbirdError.invalidParameters),this._manager.patchContext(t,n,s)}))}requestMessengerSettings(t){return e.__awaiter(this,void 0,void 0,(function*(){const{aiAgentId:n,userId:s,language:i,country:r,context:a,forceCreateChannel:o,knownActiveChannelUrl:l,shouldSendFirstMessage:d}=t;return e.unless(e.isTypeOf("string",n)&&e.isTypeOf("string",s,!0)&&e.isTypeOf("string",i,!0)&&e.isTypeOf("string",r,!0)&&e.isTypeOf("object",a,!0)&&e.isTypeOf("boolean",o,!0)&&e.isTypeOf("string",l,!0)&&e.isTypeOf("boolean",d,!0)).throw(e.SendbirdError.invalidParameters),this._manager.requestMessengerSettings(t)}))}createConversationListQuery(e={}){return new $(this._iid,e)}createMyGroupChannelListQuery(e={}){return new D(this._iid,e)}getMyGroupChannelChangeLogsByToken(t,n={}){return e.__awaiter(this,void 0,void 0,(function*(){const s=Object.assign(Object.assign({},_),n);return e.unless(e.isTypeOf("string",t)&&C(s)).throw(e.SendbirdError.invalidParameters),yield this._manager.getMyGroupChannelChangeLogs(t,s)}))}getMyGroupChannelChangeLogsByTimestamp(t,n={}){return e.__awaiter(this,void 0,void 0,(function*(){const s=Object.assign(Object.assign({},_),n);return e.unless(e.isTypeOf("number",t)&&C(s)).throw(e.SendbirdError.invalidParameters),yield this._manager.getMyGroupChannelChangeLogs(t,s)}))}getUnreadMessageCount(n={}){return e.__awaiter(this,void 0,void 0,(function*(){const s=Object.assign(Object.assign({},f),n);return e.unless(e.isEnumOf(exports.AIAgentChannelFilter,s.aiAgentChannelFilter,!0)&&e.isArrayOf(t.ConversationStatus,s.aiAgentConversationStatusFilter,!0)&&e.isArrayOf("string",s.aiAgentIds,!0)&&e.isEnumOf(exports.DeskChannelFilter,s.deskChannelFilter,!0)&&e.isArrayOf("string",s.pinnedChannelUrls,!0)&&e.isTypeOf("boolean",s.copilotConversationOnly,!0)&&e.isTypeOf("string",s.copilotSupportChannelUrl,!0)).throw(e.SendbirdError.invalidParameters),this._manager.getUnreadMessageCount(s)}))}getMessageTemplates(t={}){return e.__awaiter(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},a),t);return e.unless((t=>e.isTypeOf("number",t.limit,!0)&&e.isArrayOf("string",t.keys,!0))(n)).throw(e.SendbirdError.invalidParameters),this._manager.getMessageTemplates(t)}))}getMessageTemplate(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.getMessageTemplate(t)}))}submitForm(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isTypeOf("string",t.formKey)&&e.isTypeOf("object",t.formData)).throw(e.SendbirdError.invalidParameters),this._manager.submitForm(t)}))}cancelForm(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isTypeOf("string",t.formKey)).throw(e.SendbirdError.invalidParameters),this._manager.cancelForm(t)}))}createMessageFeedback(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isEnumOf(exports.AIAgentMessageFeedbackRating,t.rating)&&e.isTypeOf("string",t.comment,!0)).throw(e.SendbirdError.invalidParameters),this._manager.createMessageFeedback(t)}))}updateMessageFeedback(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isEnumOf(exports.AIAgentMessageFeedbackRating,t.rating)&&e.isTypeOf("string",t.comment,!0)).throw(e.SendbirdError.invalidParameters),this._manager.updateMessageFeedback(t)}))}requestOTP(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isTypeOf("string",t.otpKey)&&e.isTypeOf("string",t.otpChannel)&&e.isTypeOf("object",t.otpData)).throw(e.SendbirdError.invalidParameters),this._manager.requestOTP(t)}))}verifyOTP(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isTypeOf("string",t.otpKey)&&e.isTypeOf("string",t.code)).throw(e.SendbirdError.invalidParameters),this._manager.verifyOTP(t)}))}cancelOTP(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isTypeOf("string",t.otpKey)).throw(e.SendbirdError.invalidParameters),this._manager.cancelOTP(t)}))}deleteMessageFeedback(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)).throw(e.SendbirdError.invalidParameters),this._manager.deleteMessageFeedback(t)}))}submitUserActionMessage(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t.channelUrl)&&e.isTypeOf("number",t.messageId)&&e.isTypeOf("string",t.status)&&e.isTypeOf("string",t.detail,!0)).throw(e.SendbirdError.invalidParameters),this._manager.submitUserActionMessage(t)}))}}exports.AIAgentInfo=e.AIAgentInfo,exports.Conversation=t.Conversation,exports.ConversationChannelInfo=t.ConversationChannelInfo,exports.ConversationHandoff=t.ConversationHandoff,exports.ConversationResolution=t.ConversationResolution,Object.defineProperty(exports,"ConversationStatus",{enumerable:!0,get:function(){return t.ConversationStatus}}),Object.defineProperty(exports,"ConversationType",{enumerable:!0,get:function(){return t.ConversationType}}),exports.HelpdeskInfo=t.HelpdeskInfo,exports.AIAgentGroupChannelListQuery=D,exports.AIAgentModule=Q,exports.ConversationListQuery=$;
