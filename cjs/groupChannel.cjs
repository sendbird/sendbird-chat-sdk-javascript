Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./lib/__bundle-c453dae4.cjs"),t=require("./lib/__bundle-10ee04ba.cjs"),n=require("./lib/__bundle-ab3d170f.cjs"),s=require("./lib/__bundle-aeda6baa.cjs"),i=require("./lib/__bundle-bb447d68.cjs");require("./lib/__bundle-c2ffca16.cjs"),require("./lib/__bundle-dae7bdf2.cjs"),require("./lib/__bundle-ad2bfea5.cjs");const r={};class a{constructor({_iid:n,limit:i=100}){this.ref=0,this._iid=n,this._limit=i;const{sdkState:r,dispatcher:a,logger:o,cacheContext:l,statManager:d}=e.Vault.of(this._iid);this._metadataKey=`sendbird:${r.userId}@groupchannel/sync.meta`;const h=(e=>`sendbird:${e}@groupchannel/sync`)(r.userId);this._sync=new s.Sync(h,(()=>e.__awaiter(this,void 0,void 0,(function*(){var n,i,a,h,c,u,_,g;const p={hasNext:!0,nextToken:""};if(yield this.loadMetadata(),o.debug("channel background sync from",null===(n=this._metadata)||void 0===n?void 0:n.token),null===(i=this._metadata)||void 0===i?void 0:i.completed)p.hasNext=!1,p.nextToken="";else{const n={includeEmpty:!0,includeMetaData:!0,hiddenChannelFilter:t.HiddenChannelFilter.ALL,order:s.GroupChannelListOrder.CHRONOLOGICAL};try{if(n.order===s.GroupChannelListOrder.LATEST_LAST_MESSAGE)try{const t=yield l.preference.get(e.createChangelogIncludeChatNotificationsCacheKey(r.appId));n.includeChatNotification=Boolean(t)}catch(e){n.includeChatNotification=!1}const i=t.GroupChannelManager.of(this._iid),{channels:d,token:c}=yield i.getMyGroupChannels(null!==(h=null===(a=this._metadata)||void 0===a?void 0:a.token)&&void 0!==h?h:"",n,this._limit,e.CollectionEventSource.SYNC_CHANNEL_BACKGROUND);p.hasNext=d.length>=this._limit&&!!c,p.nextToken=c,this._metadata&&(this._metadata.token=c,this._metadata.range.extends(...d.map((e=>e.createdAt))),this._metadata.completed=!p.hasNext),o.debug("channel background sync progress",p),yield this.saveMetadata()}catch(t){throw o.debug("channel background sync error",t),t instanceof e.SendbirdError&&t.isInvalidTokenError&&(yield this.clearMetaData()),t}finally{d.put(new e.StatLog({type:e.StatType.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:null!==(u=null===(c=l.localCacheConfig)||void 0===c?void 0:c.maxSize)&&void 0!==u?u:0,use_local_cache:l.localCacheEnabled,starting_point:0,message_init_policy:null!==(g=null===(_=n.order)||void 0===_?void 0:_.toString())&&void 0!==g?g:"",collection_id:r.userId}}))}}return p})))),this._connectionEventContext=a.on((t=>{if(t instanceof e.ConnectionStateChangeCommand)if(t.stateType===e.ConnectionStateType.CONNECTED)this.resume();else this.pause();else t instanceof s.ForceResumeSyncRequestCommand&&this.resume()}))}static of(e){return r[e]||(r[e]=new a({_iid:e})),r[e].ref++,r[e]}static clear(e){r[e]&&(r[e].close(),delete r[e])}get range(){var e,n;return null!==(n=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==n?n:new t.TimeRange({})}get completed(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)}loadMetadata(){return e.__awaiter(this,void 0,void 0,(function*(){if(!this._metadata){const{cacheContext:n}=e.Vault.of(this._iid),s=yield n.preference.get(this._metadataKey);this._metadata={token:s?s.token:"",range:new t.TimeRange(s?s.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!s&&s.completed}}return this._metadata}))}saveMetadata(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._metadata){const{cacheContext:t}=e.Vault.of(this._iid);return yield t.preference.set(this._metadataKey,this._metadata),!0}return!1}))}clearMetaData(){return e.__awaiter(this,void 0,void 0,(function*(){const{cacheContext:t}=e.Vault.of(this._iid);yield t.preference.remove(this._metadataKey),this._metadata=void 0}))}resume(){var t,n;const{logger:s,sessionManager:i}=e.Vault.of(this._iid);i.session.hasSession&&(s.debug("channel background sync resume()"),this._sync.start(null!==(n=null===(t=this._metadata)||void 0===t?void 0:t.token)&&void 0!==n?n:""))}pause(){const{logger:t}=e.Vault.of(this._iid);t.debug("channel background sync stop()"),this._sync.stop()}close(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete r[this._iid])}}const o={};class l{constructor({_iid:n}){this.ref=0,this._iid=n;const{logger:i,sdkState:r,dispatcher:a,cacheContext:o,statManager:l}=e.Vault.of(this._iid);this._metadataKey=`sendbird:${r.userId}@groupchannel/changelogs.meta`,this._subscribers=new e.EventDispatcher;const d=(e=>`sendbird:${e}@groupchannel/changelogs`)(r.userId);this._sync=new s.Sync(d,(()=>e.__awaiter(this,void 0,void 0,(function*(){var n,s,a;const d={hasNext:!0,nextToken:0};yield this.loadMetadata(),i.debug("channel changelog sync from",null===(n=this._metadata)||void 0===n?void 0:n.token);const h=t.GroupChannelManager.of(this._iid);try{const t={includeEmpty:!0,includeMetaData:!0};try{const n=yield o.preference.get(e.createChangelogIncludeChatNotificationsCacheKey(r.appId));t.includeChatNotification=Boolean(n)}catch(e){t.includeChatNotification=!1}const{updatedChannels:n,deletedChannelUrls:c,hasMore:u,token:_}=yield h.getMyGroupChannelChangeLogs(null!==(a=null===(s=this._metadata)||void 0===s?void 0:s.token)&&void 0!==a?a:"",t,e.CollectionEventSource.SYNC_CHANNEL_CHANGELOGS);this._subscribers.dispatch("progress",{updatedChannels:n,deletedChannelUrls:c,hasMore:u,token:_}),d.hasNext=u,d.nextToken=_,this._metadata&&(this._metadata.token=_),i.debug("channel changelog sync progress",d),yield this.saveMetadata(),o.localCacheEnabled&&l.put(new e.StatLog({type:e.StatType.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:n.length>0||c.length>0?"cache_miss":"cache_hit",max_db_size:n.length,use_local_cache:o.localCacheEnabled,starting_point:0,message_init_policy:c.length.toString(),collection_id:r.userId}}))}catch(t){throw i.debug("channel changelog sync error",t),t instanceof e.SendbirdError&&t.isInvalidTokenError&&(yield this.clearMetadata()),t}finally{d.hasNext||(yield e.sleep(500),yield h.removeChannelsByRotation())}return d})))),this._sync.on("stop",(()=>{this._subscribers.dispatch("pause")})),this._connectionEventContext=a.on((t=>{if(t instanceof e.ConnectionStateChangeCommand)if(t.stateType===e.ConnectionStateType.CONNECTED)this.resume();else this.pause();else t instanceof s.ForceResumeSyncRequestCommand&&this.resume()}))}static of(e){return o[e]||(o[e]=new l({_iid:e})),o[e].ref++,o[e]}static clear(e){o[e]&&(o[e].close(),delete o[e])}get isRunning(){return this._sync.isRunning}loadMetadata(){return e.__awaiter(this,void 0,void 0,(function*(){if(!this._metadata){const{cacheContext:t,firstConnectedAt:n}=e.Vault.of(this._iid),s=yield t.preference.get(this._metadataKey);this._metadata={token:s?s.token:n}}return this._metadata}))}saveMetadata(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._metadata){const{cacheContext:t}=e.Vault.of(this._iid);return yield t.preference.set(this._metadataKey,this._metadata),!0}return!1}))}clearMetadata(){return e.__awaiter(this,void 0,void 0,(function*(){const{cacheContext:t}=e.Vault.of(this._iid);yield t.preference.remove(this._metadataKey),this._metadata=void 0}))}on(e,t){return this._subscribers.on(e,t)}resume(){const{sessionManager:t}=e.Vault.of(this._iid);t.session.hasSession&&this._sync.start(0)}pause(){this._sync.stop()}close(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete o[this._iid])}}const d=(e,t)=>e.findIndex((e=>e.isIdentical(t))),h=(e,t,n)=>{if(e.length>0){const s=d(e,t);let i=0,r=e.length-1,a=Math.floor((i+r)/2);for(;i<r;){const o=c(e[a],t,n);if(o>0)r=a,a=Math.floor((i+r)/2);else{if(!(o<0))return{place:a,oldPosition:s};i=a+1,a=Math.floor((i+r)/2)}}return{place:c(e[a],t,n)>=0?a:a+1,oldPosition:s}}return{place:e.length,oldPosition:-1}},c=(e,t,n)=>{switch(n){case s.GroupChannelListOrder.LATEST_LAST_MESSAGE:if(e.lastMessage&&t.lastMessage){const n=t.lastMessage.createdAt-e.lastMessage.createdAt;return 0===n?t.createdAt-e.createdAt:n}return e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case s.GroupChannelListOrder.CHRONOLOGICAL:return t.createdAt-e.createdAt;case s.GroupChannelListOrder.CHANNEL_NAME_ALPHABETICAL:{const n=e.name.localeCompare(t.name);return 0===n?e.createdAt-t.createdAt:n}default:return 0}};class u{constructor(i,{filter:r=new t.GroupChannelFilter,order:o=s.GroupChannelListOrder.LATEST_LAST_MESSAGE,limit:d=n.DEFAULT_GROUPCHANNEL_LIMIT,includeChangesOnInitialLoad:h=!1}){this.channels=[],this._isInitialized=!1,this._iid=i,this._key=`gcc-${e.uuid()}`,this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=h,this.filter=r,this.order=o,this._hasMore=!0,this._token="",this._limit=d;const{sdkState:c,cacheContext:u,dispatcher:_}=e.Vault.of(this._iid);u.localCacheEnabled&&(this._backgroundSync=a.of(i),this._backgroundSync.resume()),this._changelogSync=l.of(i),this._changelogSync.resume();t.GroupChannelManager.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:(e,n)=>{const{source:s}=n;if(t.shouldGiveEvent(s)){const t=e.filter((e=>this.filter.match(e,c.userId))),s=e.filter((e=>!this.filter.match(e,c.userId))).map((e=>e.url));t.length>0&&this._addChannelsToView(t,n),s.length>0&&this._removeChannelsFromView(s,n)}},onRemove:(e,t)=>{this._removeChannelsFromView(e,t)}}),_.on((t=>{t instanceof e.ConnectionStateChangeCommand&&(t.stateType===e.ConnectionStateType.CONNECTED?this._isGetRemoteChannelsSucceeded||(()=>{e.__awaiter(this,void 0,void 0,(function*(){yield this._revokeLoadMore()}))})():t.stateType===e.ConnectionStateType.LOGOUT&&this.dispose())}))}get hasMore(){return!this._isDisposed&&this._hasMore}setGroupChannelCollectionHandler(e){this._handler=e}_addChannelsToView(n,i,r=!1){const a=[],o=[],l=[];for(const t of n){const n=d(this.channels,t);n>=0&&this.channels.splice(n,1);const{place:c}=h(this.channels,t,this.order);if(n<0)c===this.channels.length?!r&&this._hasMore||(a.push(t),this.channels.push(t)):(a.push(t),this.channels.splice(c,0,t));else switch(i.source){case e.CollectionEventSource.EVENT_CHANNEL_UPDATED:case e.CollectionEventSource.EVENT_MESSAGE_RECEIVED:case e.CollectionEventSource.SYNC_CHANNEL_CHANGELOGS:case e.CollectionEventSource.EVENT_MESSAGE_SENT:this.order===s.GroupChannelListOrder.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&c===this.channels.length?l.push(t):(this.channels.splice(c,0,t),o.push(t));break;default:this.channels.splice(c,0,t),o.push(t)}}if(l.length>0)for(const e of l){const t=d(this.channels,e);-1!==t&&this.channels.splice(t,1)}t.shouldGiveEvent(i.source)&&e.runAsCallback((()=>e.__awaiter(this,void 0,void 0,(function*(){var e,t,n;a.length>0&&(null===(e=this._handler)||void 0===e?void 0:e.onChannelsAdded)&&this._handler.onChannelsAdded(i,a),o.length>0&&(null===(t=this._handler)||void 0===t?void 0:t.onChannelsUpdated)&&this._handler.onChannelsUpdated(i,o),l.length>0&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelsDeleted)&&this._handler.onChannelsDeleted(i,l.map((e=>e.url)))}))))}_removeChannelsFromView(n,s){const i=[];for(const e of n){const t=this.channels.findIndex((t=>t.url===e));t>=0&&(i.push(this.channels[t].url),this.channels.splice(t,1))}return t.shouldGiveEvent(s.source)&&i.length>0&&e.runAsCallback((()=>e.__awaiter(this,void 0,void 0,(function*(){var e;(null===(e=this._handler)||void 0===e?void 0:e.onChannelsDeleted)&&this._handler.onChannelsDeleted(s,i)})))),i}_getLocalChannels(){return e.__awaiter(this,void 0,void 0,(function*(){const e=t.GroupChannelManager.of(this._iid),n=this.channels.length>0?((e,t)=>{var n,i,r,a;switch(t){case s.GroupChannelListOrder.LATEST_LAST_MESSAGE:return null!==(i=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==i?i:e.createdAt;case s.GroupChannelListOrder.CHRONOLOGICAL:return e.createdAt;case s.GroupChannelListOrder.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(a=null===(r=e.lastMessage)||void 0===r?void 0:r.createdAt)&&void 0!==a?a:e.createdAt}})(this.channels[this.channels.length-1],this.order):null;return yield e.getChannelsFromCache(n,this.filter,this.order,this._limit,n?this.channels[this.channels.length-1].url:void 0)}))}_getRemoteChannels(){return e.__awaiter(this,void 0,void 0,(function*(){const n=t.GroupChannelManager.of(this._iid),{channels:s,token:i}=yield n.getMyGroupChannels(this._token,e.undefineNullProps(Object.assign(Object.assign({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit);return this._token=i,this._hasMore=!!i,s}))}_revokeLoadMore(){return e.__awaiter(this,void 0,void 0,(function*(){if(!this._isDisposed)try{const t=yield this._getRemoteChannels();this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(t,{source:e.CollectionEventSource.REQUEST_CHANNEL},!0)}catch(e){this._isGetRemoteChannelsSucceeded=!1}}))}loadMore(){var t;return e.__awaiter(this,void 0,void 0,(function*(){if(this._isDisposed)throw new e.SendbirdError({code:e.SendbirdErrorCode.COLLECTION_DISPOSED,message:"Collection has been disposed."});let n=null;this._includeChangesOnInitialLoad&&0===this.channels.length&&this._changelogSync.isRunning&&(n=yield new Promise((e=>{this._changelogSyncSubscriberContext=this._changelogSync.on("progress",(t=>e(t))).on("pause",(()=>e(null)))})),null===(t=this._changelogSyncSubscriberContext)||void 0===t||t.close());const{cacheContext:s,connectionManager:i,statManager:r}=e.Vault.of(this._iid);this._isInitialized||(this._isInitialized=!0,s.localCacheEnabled&&(yield this._backgroundSync.loadMetadata()),r.put(new e.DailyRecordStatLog({type:e.StatType.FEATURE_LOCALCACHE,data:{use_local_cache:s.localCacheEnabled,collection_interface:{group_channel:!0}}})));let a=[];if(this._hasMore){if(!s.localCacheEnabled||i.isConnected&&!this._backgroundSync.completed)try{a=yield this._getRemoteChannels(),this._isGetRemoteChannelsSucceeded=!0}catch(e){this._isGetRemoteChannelsSucceeded=!1}else yield e.runOrNothing((()=>e.__awaiter(this,void 0,void 0,(function*(){a=yield this._getLocalChannels()})))),this._hasMore=a.length>=this._limit;this._addChannelsToView(a,{source:e.CollectionEventSource.REQUEST_CHANNEL},!0)}if(n){const{sdkState:t}=e.Vault.of(this._iid),s=n.updatedChannels.filter((e=>this.filter.match(e,t.userId)));for(const t of s){const n=d(a,t);if(n>=0)a[n]=t;else{const{place:e}=h(a,t,this.order);a.splice(e,0,t)}this._addChannelsToView([t],{source:e.CollectionEventSource.REQUEST_CHANNEL},!0)}const i=a.map((e=>e.url));for(const e of n.deletedChannelUrls){const t=i.indexOf(e);t>=0&&(a.splice(t,1),i.splice(t,1))}this._removeChannelsFromView(n.deletedChannelUrls,{source:e.CollectionEventSource.REQUEST_CHANNEL})}return a}))}dispose(){var e,n,s;if(this._isDisposed)return;this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(n=this._changelogSync)||void 0===n||n.close(),null===(s=this._changelogSyncSubscriberContext)||void 0===s||s.close();t.GroupChannelManager.of(this._iid).unsubscribeChannelEvent(this._key)}}class _ extends i.BaseChannelHandlerParams{constructor(){super(...arguments),this.onUserJoined=e.noop,this.onUserLeft=e.noop,this.onUserReceivedInvitation=e.noop,this.onUserDeclinedInvitation=e.noop,this.onChannelHidden=e.noop,this.onUnreadMemberStatusUpdated=e.noop,this.onUserMarkedRead=e.noop,this.onUserMarkedUnread=e.noop,this.onUndeliveredMemberStatusUpdated=e.noop,this.onTypingStatusUpdated=e.noop,this.onPollUpdated=e.noop,this.onPollVoted=e.noop,this.onPollDeleted=e.noop,this.onPinnedMessageUpdated=e.noop}}class g extends _{constructor(e={}){super(),Object.keys(e).forEach((t=>{this.hasOwnProperty(t)&&(this[t]=e[t])}))}}class p extends e.APIRequestCommand{constructor(t){const{token:n,limit:s,order:i,reverse:r,channelUrl:a,messageTypeFilter:o,scheduledStatus:l}=t;super(),this.method=e.APIRequestMethod.GET,this.path=`${e.API_PATH_SCHEDULED_MESSAGES}`,this.params=e.deundefined(e.undefineNullProps({token:n,limit:s,reverse:r,channel_url:a,order:i,message_type:o,status:l}))}}class C extends e.APIResponseCommand{constructor(e,t){super(e,t),this.scheduledMessages=[];const{next:s,scheduled_messages:i}=t;this.token=s,this.scheduledMessages=i.map((t=>n.parseMessagePayload(e,t)))}}class m extends e.BaseListQuery{constructor(t,n){var s,i,r,a,o;super(t,n),this.channelUrl=null,this.order=null,this.reverse=!1,this.scheduledStatus=null,this.messageTypeFilter=e.MessageTypeFilter.ALL,this.channelUrl=null!==(s=n.channelUrl)&&void 0!==s?s:null,this.order=null!==(i=n.order)&&void 0!==i?i:null,this.reverse=null!==(r=n.reverse)&&void 0!==r&&r,this.scheduledStatus=null!==(a=n.scheduledStatus)&&void 0!==a?a:null,this.messageTypeFilter=null!==(o=n.messageTypeFilter)&&void 0!==o?o:e.MessageTypeFilter.ALL}_validate(){return super._validate()&&e.isTypeOf("string",this.channelUrl,!0)&&(e.isEnumOf(s.ScheduledMessageListOrder,this.order)||null===this.order)&&e.isTypeOf("boolean",this.reverse)&&(e.isArrayOf(n.ScheduledStatus,this.scheduledStatus)||null===this.scheduledStatus)&&e.isEnumOf(e.MessageTypeFilter,this.messageTypeFilter)}next(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._validate()){if(this._isLoading)throw e.SendbirdError.queryInProgress;if(this._hasNext){this._isLoading=!0;const{requestQueue:t}=e.Vault.of(this._iid),n=new p(e.undefineNullProps(Object.assign(Object.assign({},this),{token:this._token}))),s=yield t.send(n),{scheduledMessages:i,token:r}=s.as(C);return this._token=r,this._hasNext=!!r,this._isLoading=!1,i}return[]}throw e.SendbirdError.invalidParameters}))}}class f extends e.Module{constructor(){super(...arguments),this.name="groupChannel"}init(e,{sdkState:n,dispatcher:s,sessionManager:i,requestQueue:r,logger:a,onlineDetector:o,cacheContext:l}){super.init(e,{sdkState:n,dispatcher:s,sessionManager:i,requestQueue:r,logger:a,onlineDetector:o,cacheContext:l}),this._manager=new t.GroupChannelManager(e,{sdkState:n,cacheContext:l,dispatcher:s,sessionManager:i,requestQueue:r,logger:a})}createGroupChannelCollection(e={}){return new u(this._iid,e)}createMyGroupChannelListQuery(e={}){return new t.GroupChannelListQuery(this._iid,e)}createPublicGroupChannelListQuery(e={}){return new t.PublicGroupChannelListQuery(this._iid,e)}createScheduledMessageListQuery(e={}){return new m(this._iid,e)}addGroupChannelHandler(t,n){e.unless(e.isTypeOf("string",t)&&n instanceof g).throw(e.SendbirdError.invalidParameters),this._manager.addHandler(t,n)}removeGroupChannelHandler(t){e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.removeHandler(t)}removeAllGroupChannelHandlers(){this._manager.clearHandler()}buildGroupChannelFromSerializedData(e){return this._manager.buildGroupChannelFromSerializedData(e)}buildGroupChannelListQueryFromSerializedData(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)}buildMemberFromSerializedData(e){return this._manager.buildMemberFromSerializedData(e)}getChannel(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.getChannel(t)}))}getChannelWithoutCache(t){return e.__awaiter(this,void 0,void 0,(function*(){return e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.getChannelWithoutCache(t)}))}getMyGroupChannelChangeLogsByToken(n,s={}){return e.__awaiter(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},t.GroupChannelChangeLogsParamsDefault),s);return e.unless(e.isTypeOf("string",n)&&t.validateGroupChannelChangeLogsParams(i)).throw(e.SendbirdError.invalidParameters),yield this._manager.getMyGroupChannelChangeLogs(n,i)}))}getMyGroupChannelChangeLogsByTimestamp(n,s={}){return e.__awaiter(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},t.GroupChannelChangeLogsParamsDefault),s);return e.unless(e.isTypeOf("number",n)&&t.validateGroupChannelChangeLogsParams(i)).throw(e.SendbirdError.invalidParameters),yield this._manager.getMyGroupChannelChangeLogs(n,i)}))}getGroupChannelCount(n){return e.__awaiter(this,void 0,void 0,(function*(){const s=Object.assign(Object.assign({},t.GroupChannelCountParamsDefault),n);return e.unless(t.validateGroupChannelCountParams(s)).throw(e.SendbirdError.invalidParameters),this._manager.getGroupChannelCount(s)}))}getUnreadItemCount(t={}){return e.__awaiter(this,void 0,void 0,(function*(){return yield this._manager.getUnreadItemCount(t)}))}getTotalUnreadChannelCount(){return e.__awaiter(this,void 0,void 0,(function*(){return yield this._manager.getTotalUnreadChannelCount()}))}getTotalUnreadMessageCount(t={}){return e.__awaiter(this,void 0,void 0,(function*(){return yield this._manager.getTotalUnreadMessageCount(t)}))}getTotalScheduledMessageCount(t={}){return e.__awaiter(this,void 0,void 0,(function*(){return yield this._manager.getTotalScheduledMessageCount(t)}))}getSubscribedTotalUnreadMessageCount(){return this._manager.getSubscribedTotalUnreadMessageCount()}getSubscribedCustomTypeTotalUnreadMessageCount(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()}getSubscribedCustomTypeUnreadMessageCount(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)}createChannel(n={}){return e.__awaiter(this,void 0,void 0,(function*(){const s=Object.assign(Object.assign({},t.GroupChannelCreateParamsDefault),n);return e.unless(t.validateGroupChannelCreateParams(s)).throw(e.SendbirdError.invalidParameters),this._manager.createChannel(s)}))}createDistinctChannelIfNotExist(n={}){return e.__awaiter(this,void 0,void 0,(function*(){const s=Object.assign(Object.assign({},t.GroupChannelCreateParamsDefault),n);return e.unless(t.validateGroupChannelCreateParams(s)).throw(e.SendbirdError.invalidParameters),s&&(s.isDistinct=!0),this.createChannel(s)}))}createChannelWithUserIds(n,s=!1,i,r,a="",o=""){return e.__awaiter(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({},t.GroupChannelCreateParamsDefault),{invitedUserIds:n,isDistinct:s,name:i,data:a,customType:o});return"string"==typeof r?e.coverUrl=r:e.coverImage=r,this.createChannel(e)}))}markAsReadAll(){return e.__awaiter(this,void 0,void 0,(function*(){this._manager.markAsReadAll()}))}markAsReadWithChannelUrls(t){return e.__awaiter(this,void 0,void 0,(function*(){e.unless(e.isArrayOf("string",t)).throw(e.SendbirdError.invalidParameters),this._manager.markAsReadWithChannelUrls(t)}))}markAsDelivered(t){return e.__awaiter(this,void 0,void 0,(function*(){e.unless(e.isTypeOf("string",t)).throw(e.SendbirdError.invalidParameters);const n=yield this.getChannel(t);yield n.markAsDelivered()}))}}exports.MessageEventSource=e.MessageEventSource,Object.defineProperty(exports,"MutedState",{enumerable:!0,get:function(){return e.MutedState}}),Object.defineProperty(exports,"CountPreference",{enumerable:!0,get:function(){return t.CountPreference}}),exports.DeliveryStatus=t.DeliveryStatus,exports.GroupChannel=t.GroupChannel,exports.GroupChannelEventSource=t.GroupChannelEventSource,exports.GroupChannelFilter=t.GroupChannelFilter,exports.GroupChannelListQuery=t.GroupChannelListQuery,Object.defineProperty(exports,"GroupChannelSearchField",{enumerable:!0,get:function(){return t.GroupChannelSearchField}}),Object.defineProperty(exports,"HiddenChannelFilter",{enumerable:!0,get:function(){return t.HiddenChannelFilter}}),Object.defineProperty(exports,"HiddenState",{enumerable:!0,get:function(){return t.HiddenState}}),exports.Member=t.Member,Object.defineProperty(exports,"MemberListOrder",{enumerable:!0,get:function(){return t.MemberListOrder}}),exports.MemberListQuery=t.MemberListQuery,Object.defineProperty(exports,"MemberState",{enumerable:!0,get:function(){return t.MemberState}}),Object.defineProperty(exports,"MemberStateFilter",{enumerable:!0,get:function(){return t.MemberStateFilter}}),Object.defineProperty(exports,"MembershipFilter",{enumerable:!0,get:function(){return t.MembershipFilter}}),exports.MessageCollection=t.MessageCollection,exports.MessageCollectionInitHandler=t.MessageCollectionInitHandler,Object.defineProperty(exports,"MessageCollectionInitPolicy",{enumerable:!0,get:function(){return t.MessageCollectionInitPolicy}}),Object.defineProperty(exports,"MutedMemberFilter",{enumerable:!0,get:function(){return t.MutedMemberFilter}}),Object.defineProperty(exports,"MyMemberStateFilter",{enumerable:!0,get:function(){return t.MyMemberStateFilter}}),Object.defineProperty(exports,"OperatorFilter",{enumerable:!0,get:function(){return t.OperatorFilter}}),Object.defineProperty(exports,"PublicChannelFilter",{enumerable:!0,get:function(){return t.PublicChannelFilter}}),exports.PublicGroupChannelListQuery=t.PublicGroupChannelListQuery,Object.defineProperty(exports,"QueryType",{enumerable:!0,get:function(){return t.QueryType}}),Object.defineProperty(exports,"SuperChannelFilter",{enumerable:!0,get:function(){return t.SuperChannelFilter}}),Object.defineProperty(exports,"UnreadChannelFilter",{enumerable:!0,get:function(){return t.UnreadChannelFilter}}),Object.defineProperty(exports,"UnreadItemKey",{enumerable:!0,get:function(){return t.UnreadItemKey}}),exports.MessageFilter=n.MessageFilter,exports.PinnedMessage=n.PinnedMessage,exports.PinnedMessageListQuery=n.PinnedMessageListQuery,exports.ReadStatus=n.ReadStatus,Object.defineProperty(exports,"ScheduledStatus",{enumerable:!0,get:function(){return n.ScheduledStatus}}),Object.defineProperty(exports,"GroupChannelListOrder",{enumerable:!0,get:function(){return s.GroupChannelListOrder}}),Object.defineProperty(exports,"PublicGroupChannelListOrder",{enumerable:!0,get:function(){return s.PublicGroupChannelListOrder}}),Object.defineProperty(exports,"ScheduledMessageListOrder",{enumerable:!0,get:function(){return s.ScheduledMessageListOrder}}),exports.GroupChannelCollection=u,exports.GroupChannelHandler=g,exports.GroupChannelModule=f,exports.ScheduledMessageListQuery=m;
