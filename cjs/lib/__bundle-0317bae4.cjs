var e=require("./__bundle-06ddf546.cjs"),s=require("./__bundle-890ca21a.cjs"),t=require("./__bundle-a1f95ba4.cjs");class n extends e.APIRequestCommand{constructor({channelType:s,channelUrl:t,limit:n,token:a}){super(),this.method=e.APIRequestMethod.GET,this.path=`${e.getChannelApiPathByType(s)}/${encodeURIComponent(t)}/messages/parent_thread_message`,this.params=e.deundefined(e.undefineNullProps({limit:n,token:a}))}}class a extends e.APIResponseCommand{constructor(e,s){super(e,s),this.token=s.next,this.messages=s.messages.map((s=>t.parseMessagePayload(e,s)))}}class i extends s.ChannelDataListQuery{constructor(e,s,t,n){super(e,s,t,n),this._edge=""}_validate(){return super._validate()}load(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._validate()){if(this._isLoading)throw e.SendbirdError.queryInProgress;if(this._hasNext){this._isLoading=!0;const{requestQueue:s}=e.Vault.of(this._iid),t=new n({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),i=yield s.send(t),{messages:r,token:d}=i.as(a);return this._edge=d,this._hasNext=!!d,this._isLoading=!1,r}return[]}throw e.SendbirdError.invalidParameters}))}}exports.ThreadedParentMessageListQuery=i;
