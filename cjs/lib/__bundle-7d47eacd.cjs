var e=require("./__bundle-b514b710.cjs"),s=require("./__bundle-2c7dc1ef.cjs"),t=require("./__bundle-d655b67f.cjs");class n extends e.APIRequestCommand{constructor({channelType:s,channelUrl:t,limit:n,token:i}){super(),this.method=e.APIRequestMethod.GET,this.path=`${e.getChannelApiPathByType(s)}/${encodeURIComponent(t)}/messages/parent_thread_message`,this.params=e.deundefined(e.undefineNullProps({limit:n,token:i}))}}class i extends e.APIResponseCommand{constructor(e,s){super(e,s),this.token=s.next,this.messages=s.messages.map((s=>t.parseMessagePayload(e,s)))}}class r extends s.ChannelDataListQuery{constructor(e,s,t,n){super(e,s,t,n),this._edge=""}_validate(){return super._validate()}load(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._validate()){if(this._isLoading)throw e.SendbirdError.queryInProgress;if(this._hasNext){this._isLoading=!0;const{requestQueue:s}=e.Vault.of(this._iid),t=new n({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),r=yield s.send(t),{messages:a,token:d}=r.as(i);return this._edge=d,this._hasNext=!!d,this._isLoading=!1,a}return[]}throw e.SendbirdError.invalidParameters}))}}exports.ThreadedParentMessageListQuery=r;
