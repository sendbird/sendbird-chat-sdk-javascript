var e=require("./__bundle-a11d6b6e.cjs"),s=require("./__bundle-80887a34.cjs"),t=require("./__bundle-a12adaf9.cjs");class a extends e.APIRequestCommand{constructor({channelType:s,channelUrl:t,limit:a,token:n}){super(),this.method=e.APIRequestMethod.GET,this.path=`${e.getChannelApiPathByType(s)}/${encodeURIComponent(t)}/messages/parent_thread_message`,this.params=e.deundefined(e.undefineNullProps({limit:a,token:n}))}}class n extends e.APIResponseCommand{constructor(e,s){super(e,s),this.token=s.next,this.messages=s.messages.map((s=>t.parseMessagePayload(e,s)))}}class i extends s.ChannelDataListQuery{constructor(e,s,t,a){super(e,s,t,a),this._edge=""}_validate(){return super._validate()}load(){return e.__awaiter(this,void 0,void 0,(function*(){if(this._validate()){if(this._isLoading)throw e.SendbirdError.queryInProgress;if(this._hasNext){this._isLoading=!0;const{requestQueue:s}=e.Vault.of(this._iid),t=new a({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),i=yield s.send(t),{messages:r,token:d}=i.as(n);return this._edge=d,this._hasNext=!!d,this._isLoading=!1,r}return[]}throw e.SendbirdError.invalidParameters}))}}exports.ThreadedParentMessageListQuery=i;
