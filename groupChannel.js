import{_ as e,V as i,b as s,D as h,F as f,s as _,p as v,q as g,a2 as E,K as L,E as A,t as T,G as F,n as N,b8 as I,b9 as R,u as B,g as Y,B as J,a8 as X,c as Z,A as $,am as ee,e as te,f as ne,h as re,a as ae,Q as ie,X as se,aN as oe,az as le,ba as ue,aq as ce,w as he,aZ as de}from"./lib/__bundle-6955fac2.js";export{bb as MessageEventSource,bc as MutedState}from"./lib/__bundle-6955fac2.js";import{S as pe,T as fe,G as _e,s as me,a as ve,P as ge,b as ye,c as Ce,d as be,e as Se,v as Me,f as Ee,g as we,h as Le,i as Ae}from"./lib/__bundle-d3c9f0b8.js";export{C as CountPreference,D as DeliveryStatus,b as GroupChannel,j as GroupChannelEventSource,a as GroupChannelFilter,d as GroupChannelListQuery,k as GroupChannelSearchField,H as HiddenChannelFilter,l as HiddenState,M as Member,m as MemberListOrder,n as MemberListQuery,o as MemberState,p as MemberStateFilter,r as MessageCollection,t as MessageCollectionInitHandler,u as MessageCollectionInitPolicy,w as MutedMemberFilter,q as MyMemberStateFilter,O as OperatorFilter,x as PinnedMessage,y as PinnedMessageListQuery,P as PublicChannelFilter,Q as QueryType,c as SuperChannelFilter,U as UnreadChannelFilter,z as UnreadItemKey}from"./lib/__bundle-d3c9f0b8.js";import{Q as Te,T as ke,V as Fe}from"./lib/__bundle-4e14516d.js";export{K as MessageFilter,W as ReadStatus,V as ScheduledStatus}from"./lib/__bundle-4e14516d.js";import{G as Ne,P as xe,S as Ge}from"./lib/__bundle-64493c1f.js";export{G as GroupChannelListOrder,P as PublicGroupChannelListOrder,S as ScheduledMessageListOrder}from"./lib/__bundle-64493c1f.js";import{B as Ue}from"./lib/__bundle-a1ff7499.js";import"./lib/__bundle-62280f17.js";import"./lib/__bundle-acd77193.js";var Oe,De={},Pe=function(){function t(t){var n=t._iid,r=t.limit,a=void 0===r?100:r,o=this;this.ref=0,this._iid=n,this._limit=a;var l,u=i.of(this._iid),c=u.sdkState,d=u.dispatcher,p=u.logger,m=u.cacheContext;this._metadataKey=(l=c.userId,"sendbird:".concat(l,"@groupchannel/sync.meta"));var y=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(c.userId);this._sync=new pe(y,(function(){return e(o,void 0,void 0,(function(){var e,t,n,r,a,i,o,l,u,h,d,f;return s(this,(function(s){switch(s.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(s.sent(),p.debug("channel background sync from",null===(u=this._metadata)||void 0===u?void 0:u.token),null===(h=this._metadata)||void 0===h?void 0:h.completed)return[3,13];s.label=2;case 2:if(s.trys.push([2,9,,12]),(t={includeEmpty:!0,order:Ne.CHRONOLOGICAL}).order!==Ne.LATEST_LAST_MESSAGE)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,m.preference.get(L(c.appId))];case 4:return n=s.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return s.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_e.of(this._iid).getMyGroupChannels(null!==(f=null===(d=this._metadata)||void 0===d?void 0:d.token)&&void 0!==f?f:"",t,this._limit,E.SYNC_CHANNEL_BACKGROUND)];case 7:return r=s.sent(),a=r.channels,i=r.token,e.hasNext=a.length>=this._limit&&!!i,e.nextToken=i,this._metadata&&(this._metadata.token=i,(l=this._metadata.range).extends.apply(l,v([],g(a.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),p.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return s.sent(),[3,12];case 9:return o=s.sent(),p.debug("channel background sync error",o),o instanceof _&&o.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:s.sent(),s.label=11;case 11:throw o;case 12:return[3,14];case 13:e.hasNext=!1,e.nextToken="",s.label=14;case 14:return[2,e]}}))}))})),this._connectionEventContext=d.on((function(e){if(e instanceof h)if(e.stateType===f.CONNECTED)o.resume();else o.pause()}))}return t.of=function(e){return De[e]||(De[e]=new t({_iid:e})),De[e].ref++,De[e]},t.clear=function(e){De[e]&&(De[e].close(),delete De[e])},Object.defineProperty(t.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new fe({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return e(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,i.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata={token:e?e.token:"",range:new fe(e?e.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!e&&e.completed},t.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this._metadata?[4,i.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetaData=function(){return e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,i.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var e,t,n=i.of(this._iid),r=n.logger;n.sessionManager.session.hasSession&&(r.debug("channel background sync resume()"),this._sync.start(null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.token)&&void 0!==t?t:""))},t.prototype.pause=function(){i.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete De[this._iid])},t}(),Ie={},He=function(){function t(t){var n=t._iid,r=this;this.ref=0,this._iid=n;var a,o=i.of(this._iid),l=o.logger,u=o.sdkState,c=o.dispatcher,d=o.cacheContext;this._metadataKey=(a=u.userId,"sendbird:".concat(a,"@groupchannel/changelogs.meta")),this._subscribers=new A;var p=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(u.userId);this._sync=new pe(p,(function(){return e(r,void 0,void 0,(function(){var e,t,n,r,a,i,o,c,h,p,f,m;return s(this,(function(s){switch(s.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:s.sent(),l.debug("channel changelog sync from",null===(p=this._metadata)||void 0===p?void 0:p.token),s.label=2;case 2:s.trys.push([2,9,,12]),t={includeEmpty:!0},s.label=3;case 3:return s.trys.push([3,5,,6]),[4,d.preference.get(L(u.appId))];case 4:return n=s.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return s.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_e.of(this._iid).getMyGroupChannelChangeLogs(null!==(m=null===(f=this._metadata)||void 0===f?void 0:f.token)&&void 0!==m?m:"",t,E.SYNC_CHANNEL_CHANGELOGS)];case 7:return r=s.sent(),a=r.updatedChannels,i=r.deletedChannelUrls,o=r.hasMore,c=r.token,this._subscribers.dispatch("progress",{updatedChannels:a,deletedChannelUrls:i,hasMore:o,token:c}),e.hasNext=o,e.nextToken=c,this._metadata&&(this._metadata.token=c),l.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return s.sent(),[3,12];case 9:return h=s.sent(),l.debug("channel changelog sync error",h),h instanceof _&&h.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:s.sent(),s.label=11;case 11:throw h;case 12:return[2,e]}}))}))})),this._sync.on("stop",(function(){r._subscribers.dispatch("pause")})),this._connectionEventContext=c.on((function(e){if(e instanceof h)if(e.stateType===f.CONNECTED)r.resume();else r.pause()}))}return t.of=function(e){return Ie[e]||(Ie[e]=new t({_iid:e})),Ie[e].ref++,Ie[e]},t.clear=function(e){Ie[e]&&(Ie[e].close(),delete Ie[e])},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return e(this,void 0,void 0,(function(){var e,t,n,r;return s(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(e=i.of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:r=a.sent(),this._metadata={token:r?r.token:n},a.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this._metadata?[4,i.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,i.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.on=function(e,t){return this._subscribers.on(e,t)},t.prototype.resume=function(){i.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},t.prototype.pause=function(){this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ie[this._iid])},t}(),Re=function(e,t){return e.findIndex((function(e){return e.isIdentical(t)}))},Ve=function(e,t,n){if(e.length>0){for(var r=Re(e,t),a=0,i=e.length-1,s=Math.floor((a+i)/2);a<i;){var o=Ke(e[s],t,n);if(o>0)i=s,s=Math.floor((a+i)/2);else{if(!(o<0))return{place:s,oldPosition:r};a=s+1,s=Math.floor((a+i)/2)}}return{place:Ke(e[s],t,n)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},Ke=function(e,t,n){switch(n){case Ne.LATEST_LAST_MESSAGE:return e.lastMessage&&t.lastMessage?0===(r=t.lastMessage.createdAt-e.lastMessage.createdAt)?t.createdAt-e.createdAt:r:e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case Ne.CHRONOLOGICAL:return t.createdAt-e.createdAt;case Ne.CHANNEL_NAME_ALPHABETICAL:var r;return 0===(r=e.name.localeCompare(t.name))?e.createdAt-t.createdAt:r;default:return 0}},Qe=function(){function t(t,n){var r=n.filter,a=void 0===r?new ve:r,o=n.order,l=void 0===o?Ne.LATEST_LAST_MESSAGE:o,u=n.limit,c=void 0===u?Te:u,d=n.includeChangesOnInitialLoad,p=void 0!==d&&d,_=this;this.channels=[],this._iid=t,this._key="gcc-".concat(N()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=p,this.filter=a,this.order=l,this._hasMore=!0,this._token="",this._limit=c;var m=i.of(this._iid),v=m.sdkState,g=m.cacheContext,y=m.dispatcher;g.localCacheEnabled&&(this._backgroundSync=Pe.of(t),this._backgroundSync.resume()),this._changelogSync=He.of(t),this._changelogSync.resume(),_e.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,t){var n=t.source;if(me(n)){var r=e.filter((function(e){return _.filter.match(e,v.userId)})),a=e.filter((function(e){return!_.filter.match(e,v.userId)})).map((function(e){return e.url}));r.length>0&&_._addChannelsToView(r,t),a.length>0&&_._removeChannelsFromView(a,t)}},onRemove:function(e,t){_._removeChannelsFromView(e,t)}}),i.of(this._iid).statManager.put(new I({type:R.FEATURE_LOCALCACHE,data:{use_local_cache:g.localCacheEnabled,collection_interface:{group_channel:!0}}})),y.on((function(t){t instanceof h&&(t.stateType===f.CONNECTED?_._isGetRemoteChannelsSucceeded||e(_,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):t.stateType===f.LOGOUT&&_.dispose())}))}return Object.defineProperty(t.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),t.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},t.prototype._addChannelsToView=function(t,n,r){var a,i,o,l,u=this;void 0===r&&(r=!1);var c=[],h=[],d=[];try{for(var p=T(t),f=p.next();!f.done;f=p.next()){var _=f.value,m=Re(this.channels,_);m>=0&&this.channels.splice(m,1);var v=Ve(this.channels,_,this.order).place;if(m<0)v===this.channels.length?!r&&this._hasMore||(c.push(_),this.channels.push(_)):(c.push(_),this.channels.splice(v,0,_));else switch(n.source){case E.EVENT_CHANNEL_UPDATED:case E.EVENT_MESSAGE_RECEIVED:case E.SYNC_CHANNEL_CHANGELOGS:case E.EVENT_MESSAGE_SENT:this.order===Ne.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&v===this.channels.length?d.push(_):(this.channels.splice(v,0,_),h.push(_));break;default:this.channels.splice(v,0,_),h.push(_)}}}catch(e){a={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}if(d.length>0)try{for(var g=T(d),y=g.next();!y.done;y=g.next()){_=y.value;var C=Re(this.channels,_);-1!==C&&this.channels.splice(C,1)}}catch(e){o={error:e}}finally{try{y&&!y.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}me(n.source)&&F((function(){return e(u,void 0,void 0,(function(){var e,t,r;return s(this,(function(a){return c.length>0&&(null===(e=this._handler)||void 0===e?void 0:e.onChannelsAdded)&&this._handler.onChannelsAdded(n,c),h.length>0&&(null===(t=this._handler)||void 0===t?void 0:t.onChannelsUpdated)&&this._handler.onChannelsUpdated(n,h),d.length>0&&(null===(r=this._handler)||void 0===r?void 0:r.onChannelsDeleted)&&this._handler.onChannelsDeleted(n,d.map((function(e){return e.url}))),[2]}))}))}))},t.prototype._removeChannelsFromView=function(t,n){var r,a,i=this,o=[],l=function(e){var t=u.channels.findIndex((function(t){return t.url===e}));t>=0&&(o.push(u.channels[t].url),u.channels.splice(t,1))},u=this;try{for(var c=T(t),h=c.next();!h.done;h=c.next()){l(h.value)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return me(n.source)&&o.length>0&&F((function(){return e(i,void 0,void 0,(function(){var e;return s(this,(function(t){return(null===(e=this._handler)||void 0===e?void 0:e.onChannelsDeleted)&&this._handler.onChannelsDeleted(n,o),[2]}))}))})),o},t.prototype._getLocalChannels=function(){return e(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return e=_e.of(this._iid),t=this.channels.length>0?function(e,t){var n,r,a,i;switch(t){case Ne.LATEST_LAST_MESSAGE:return null!==(r=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==r?r:e.createdAt;case Ne.CHRONOLOGICAL:return e.createdAt;case Ne.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(i=null===(a=e.lastMessage)||void 0===a?void 0:a.createdAt)&&void 0!==i?i:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,n.sent()]}}))}))},t.prototype._getRemoteChannels=function(){return e(this,void 0,void 0,(function(){var e,t,n;return s(this,(function(r){switch(r.label){case 0:return[4,_e.of(this._iid).getMyGroupChannels(this._token,B(Y(Y({},this.filter),{order:this.order})),this._limit)];case 1:return e=r.sent(),t=e.channels,n=e.token,this._token=n,this._hasMore=!!n,[2,t]}}))}))},t.prototype._revokeLoadMore=function(){return e(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,{source:E.REQUEST_CHANNEL},!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},t.prototype.loadMore=function(){var t;return e(this,void 0,void 0,(function(){var n,r,a,o,l,u,c,h,d,p,f,m,v,g,y,C,b,S,M=this;return s(this,(function(w){switch(w.label){case 0:if(this._isDisposed)throw new _({code:X.COLLECTION_DISPOSED,message:"Collection has been disposed."});return n=null,this._includeChangesOnInitialLoad&&0===this.channels.length&&this._changelogSync.isRunning?[4,new Promise((function(e){M._changelogSyncSubscriberContext=M._changelogSync.on("progress",(function(t){return e(t)})).on("pause",(function(){return e(null)}))}))]:[3,2];case 1:n=w.sent(),null===(t=this._changelogSyncSubscriberContext)||void 0===t||t.close(),w.label=2;case 2:return r=[],this._hasMore?(a=i.of(this._iid),o=a.cacheContext,l=a.connectionManager,!o.localCacheEnabled||l.isConnected&&!this._backgroundSync.completed?[3,4]:[4,J((function(){return e(M,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return r=e.sent(),[2]}}))}))}))]):[3,8];case 3:return w.sent(),this._hasMore=r.length>=this._limit,[3,7];case 4:return w.trys.push([4,6,,7]),[4,this._getRemoteChannels()];case 5:return r=w.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,7];case 6:return w.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,7];case 7:this._addChannelsToView(r,{source:E.REQUEST_CHANNEL},!0),w.label=8;case 8:if(n){try{for(u=T(n.updatedChannels),c=u.next();!c.done;c=u.next())h=c.value,(g=Re(r,h))>=0?r[g]=h:(d=Ve(r,h,this.order).place,r.splice(d,0,h))}catch(e){y={error:e}}finally{try{c&&!c.done&&(C=u.return)&&C.call(u)}finally{if(y)throw y.error}}p=r.map((function(e){return e.url}));try{for(f=T(n.deletedChannelUrls),m=f.next();!m.done;m=f.next())v=m.value,(g=p.indexOf(v))>=0&&(r.splice(g,1),p.splice(g,1))}catch(e){b={error:e}}finally{try{m&&!m.done&&(S=f.return)&&S.call(f)}finally{if(b)throw b.error}}}return[2,r]}}))}))},t.prototype.dispose=function(){var e,t,n;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._changelogSyncSubscriberContext)||void 0===n||n.close(),_e.of(this._iid).unsubscribeChannelEvent(this._key))},t}(),je=function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.order,s=t.includeEmpty,o=t.membershipFilter,l=t.channelNameContainsFilter,u=t.channelUrlsFilter,c=t.customTypesFilter,h=t.customTypeStartsWithFilter,d=t.superChannelFilter,p=t.metadataOrderKeyFilter,f=t.metadataKey,_=t.metadataValues,m=t.metadataValueStartsWith,v=t.includeFrozen,g=t.includeMetaData;return(n=e.call(this)||this).method=$.GET,n.path=ee,n.params=te(B({token:r,limit:a,order:i,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:s,public_mode:ge.PUBLIC,public_membership_mode:o,name_contains:l,channel_urls:u,custom_types:c,custom_type_startswith:h,super_mode:d,metadata_order_key:p,metadata_key:f,metadata_values:_,metadata_value_startswith:m,show_frozen:v,show_metadata:g})),n}return Z(t,e),t}(ne),We=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var a=n.next,i=n.channels,s=n.ts;return r.token=a,i&&i.length>0&&(r.channels=i.map((function(e){return e.ts=s,new ye(t,e)}))),r.ts="number"==typeof s?s:0,r}return Z(t,e),t}(re);!function(e){e.ALL="all",e.JOINED="joined"}(Oe||(Oe={}));var ze=function(t){function n(e,n){var r,a,i,s,o,l,u,c,h,d,p,f,_,m,v=this;return(v=t.call(this,e,n)||this).includeEmpty=!1,v.includeFrozen=!0,v.includeMetaData=!0,v.channelUrlsFilter=null,v.customTypesFilter=null,v.customTypeStartsWithFilter=null,v.channelNameContainsFilter=null,v.membershipFilter=Oe.ALL,v.superChannelFilter=Ce.ALL,v.metadataKey=null,v.metadataValues=null,v.metadataOrderKeyFilter=null,v.metadataValueStartsWith=null,v.order=xe.CHRONOLOGICAL,v.includeEmpty=null!==(r=n.includeEmpty)&&void 0!==r&&r,v.includeFrozen=null===(a=n.includeFrozen)||void 0===a||a,v.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,v.channelUrlsFilter=null!==(s=n.channelUrlsFilter)&&void 0!==s?s:null,v.customTypesFilter=null!==(o=n.customTypesFilter)&&void 0!==o?o:null,v.customTypeStartsWithFilter=null!==(l=n.customTypeStartsWithFilter)&&void 0!==l?l:null,v.channelNameContainsFilter=null!==(u=n.channelNameContainsFilter)&&void 0!==u?u:null,v.membershipFilter=null!==(c=n.membershipFilter)&&void 0!==c?c:Oe.ALL,v.superChannelFilter=null!==(h=n.superChannelFilter)&&void 0!==h?h:Ce.ALL,v.metadataKey=null!==(d=n.metadataKey)&&void 0!==d?d:null,v.metadataValues=null!==(p=n.metadataValues)&&void 0!==p?p:null,v.metadataOrderKeyFilter=null!==(f=n.metadataOrderKeyFilter)&&void 0!==f?f:null,v.metadataValueStartsWith=null!==(_=n.metadataValueStartsWith)&&void 0!==_?_:null,v.order=null!==(m=n.order)&&void 0!==m?m:xe.CHRONOLOGICAL,v}return Z(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&ae("boolean",this.includeEmpty)&&ae("boolean",this.includeFrozen)&&ae("boolean",this.includeMetaData)&&ae("string",this.channelNameContainsFilter,!0)&&ie("string",this.channelUrlsFilter,!0)&&ie("string",this.customTypesFilter,!0)&&ae("string",this.customTypeStartsWithFilter,!0)&&se(Oe,this.membershipFilter)&&se(Ce,this.superChannelFilter)&&se(xe,this.order)&&ae("string",this.metadataOrderKeyFilter,!0)&&ae("string",this.metadataKey,!0)&&ie("string",this.metadataValues,!0)&&ae("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return e(this,void 0,void 0,(function(){var e,t,n,r,a,o,l;return s(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=i.of(this._iid).requestQueue,n=new je(B(Y(Y({},this),{token:this._token}))),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=s.sent(),a=r.as(We),o=a.channels,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,e];case 3:throw _.queryInProgress;case 4:return[3,6];case 5:throw _.invalidParameters;case 6:return[2]}}))}))},n}(oe),Be=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Z(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserJoined=le,t.onUserLeft=le,t.onUserReceivedInvitation=le,t.onUserDeclinedInvitation=le,t.onChannelHidden=le,t.onUnreadMemberStatusUpdated=le,t.onUndeliveredMemberStatusUpdated=le,t.onTypingStatusUpdated=le,t.onPollUpdated=le,t.onPollVoted=le,t.onPollDeleted=le,t.onPinnedMessageUpdated=le,t}return Z(t,e),t}(Ue)),qe=function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.order,s=t.reverse,o=t.channelUrl,l=t.messageTypeFilter,u=t.scheduledStatus;return(n=e.call(this)||this).method=$.GET,n.path="".concat(ue),n.params=te(B({token:r,limit:a,reverse:s,channel_url:o,order:i,message_type:l,status:u})),n}return Z(t,e),t}(ne),Ye=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.scheduledMessages=[];var a=n.next,i=n.scheduled_messages;return r.token=a,r.scheduledMessages=i.map((function(e){return ke(t,e)})),r}return Z(t,e),t}(re),Je=function(t){function n(e,n){var r,a,i,s,o,l=this;return(l=t.call(this,e,n)||this).channelUrl=null,l.order=null,l.reverse=!1,l.scheduledStatus=null,l.messageTypeFilter=ce.ALL,l.channelUrl=null!==(r=n.channelUrl)&&void 0!==r?r:null,l.order=null!==(a=n.order)&&void 0!==a?a:null,l.reverse=null!==(i=n.reverse)&&void 0!==i&&i,l.scheduledStatus=null!==(s=n.scheduledStatus)&&void 0!==s?s:null,l.messageTypeFilter=null!==(o=n.messageTypeFilter)&&void 0!==o?o:ce.ALL,l}return Z(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&ae("string",this.channelUrl,!0)&&(se(Ge,this.order)||null===this.order)&&ae("boolean",this.reverse)&&(ie(Fe,this.scheduledStatus)||null===this.scheduledStatus)&&se(ce,this.messageTypeFilter)},n.prototype.next=function(){return e(this,void 0,void 0,(function(){var e,t,n,r,a,o;return s(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=i.of(this._iid).requestQueue,t=new qe(B(Y(Y({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(Ye),a=r.scheduledMessages,o=r.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _.queryInProgress;case 4:return[3,6];case 5:throw _.invalidParameters;case 6:return[2]}}))}))},n}(oe),Xe=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="groupChannel",e}return Z(n,t),n.prototype.init=function(e,n){var r=n.sdkState,a=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,u=n.cacheContext;t.prototype.init.call(this,e,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:u}),this._manager=new _e(e,{sdkState:r,cacheContext:u,dispatcher:a,sessionManager:i,requestQueue:s,logger:o})},n.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new Qe(this._iid,e)},n.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new be(this._iid,e)},n.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new ze(this._iid,e)},n.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new Je(this._iid,e)},n.prototype.addGroupChannelHandler=function(e,t){he(ae("string",e)&&t instanceof Be).throw(_.invalidParameters),this._manager.addHandler(e,t)},n.prototype.removeGroupChannelHandler=function(e){he(ae("string",e)).throw(_.invalidParameters),this._manager.removeHandler(e)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},n.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},n.prototype.getChannel=function(t){return e(this,void 0,void 0,(function(){return s(this,(function(e){return he(ae("string",t)).throw(_.invalidParameters),[2,this._manager.getChannel(t)]}))}))},n.prototype.getChannelWithoutCache=function(t){return e(this,void 0,void 0,(function(){return s(this,(function(e){return he(ae("string",t)).throw(_.invalidParameters),[2,this._manager.getChannelWithoutCache(t)]}))}))},n.prototype.getMyGroupChannelChangeLogsByToken=function(t,n){return void 0===n&&(n={}),e(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=Y(Y({},Se),n),he(ae("string",t)&&Me(e)).throw(_.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(t,n){return void 0===n&&(n={}),e(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=Y(Y({},Se),n),he(ae("number",t)&&Me(e)).throw(_.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getGroupChannelCount=function(t){return e(this,void 0,void 0,(function(){var e;return s(this,(function(n){return e=Y(Y({},Ee),t),he(we(e)).throw(_.invalidParameters),[2,this._manager.getGroupChannelCount(e)]}))}))},n.prototype.getUnreadItemCount=function(t){return void 0===t&&(t={}),e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._manager.getUnreadItemCount(t)];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalUnreadChannelCount=function(){return e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalUnreadMessageCount=function(t){return void 0===t&&(t={}),e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(t)];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalScheduledMessageCount=function(t){return void 0===t&&(t={}),e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(t)];case 1:return[2,e.sent()]}}))}))},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},n.prototype.createChannel=function(t){return void 0===t&&(t={}),e(this,void 0,void 0,(function(){var e;return s(this,(function(n){return e=Y(Y({},Le),t),he(Ae(e)).throw(_.invalidParameters),[2,this._manager.createChannel(e)]}))}))},n.prototype.createDistinctChannelIfNotExist=function(t){return void 0===t&&(t={}),e(this,void 0,void 0,(function(){var e;return s(this,(function(n){return e=Y(Y({},Le),t),he(Ae(e)).throw(_.invalidParameters),e&&(e.isDistinct=!0),[2,this.createChannel(e)]}))}))},n.prototype.createChannelWithUserIds=function(t,n,r,a,i,o){return void 0===n&&(n=!1),void 0===i&&(i=""),void 0===o&&(o=""),e(this,void 0,void 0,(function(){var e;return s(this,(function(s){return e=Y(Y({},Le),{invitedUserIds:t,isDistinct:n,name:r,data:i,customType:o}),"string"==typeof a?e.coverUrl=a:e.coverImage=a,[2,this.createChannel(e)]}))}))},n.prototype.markAsReadAll=function(){return e(this,void 0,void 0,(function(){return s(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},n.prototype.markAsReadWithChannelUrls=function(t){return e(this,void 0,void 0,(function(){return s(this,(function(e){return he(ie("string",t)).throw(_.invalidParameters),this._manager.markAsReadWithChannelUrls(t),[2]}))}))},n.prototype.markAsDelivered=function(t){return e(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return he(ae("string",t)).throw(_.invalidParameters),[4,this.getChannel(t)];case 1:return[4,e.sent().markAsDelivered()];case 2:return e.sent(),[2]}}))}))},n}(de);export{Qe as GroupChannelCollection,Be as GroupChannelHandler,Xe as GroupChannelModule,Oe as MembershipFilter,ze as PublicGroupChannelListQuery,Je as ScheduledMessageListQuery};
