import{_ as h,V as d,b as f,I as v,J as g,z as y,B as E,t as A,q as L,r as F,Q as N,E as x,w as I,K as R,o as V,u as K,j as z,aV as W,D as B,H as J,c as $,A as ee,aC as te,e as ne,f as ae,g as re,a as ie,$ as se,a2 as oe,aM as le,aD as ue,aW as ce,au as he,F as de,aS as pe}from"./lib/__bundle-d4b50f42.js";export{aX as MutedState}from"./lib/__bundle-d4b50f42.js";import{T as fe,G as _e,H as me,s as ve,a as ge,P as ye,b as Ce,S as be,c as Se,d as Me,v as Ee,e as Ae,f as Le,g as we,h as Te}from"./lib/__bundle-f9b1898e.js";export{C as CountPreference,D as DeliveryStatus,b as GroupChannel,i as GroupChannelEventSource,a as GroupChannelFilter,c as GroupChannelListQuery,j as GroupChannelSearchField,H as HiddenChannelFilter,k as HiddenState,M as Member,l as MemberListOrder,m as MemberListQuery,n as MemberState,o as MemberStateFilter,q as MessageCollection,r as MessageCollectionInitHandler,t as MessageCollectionInitPolicy,u as MutedMemberFilter,p as MyMemberStateFilter,O as OperatorFilter,P as PublicChannelFilter,Q as QueryType,S as SuperChannelFilter,U as UnreadChannelFilter,w as UnreadItemKey}from"./lib/__bundle-f9b1898e.js";import{V as Fe,W as ke,X as Ne}from"./lib/__bundle-0db5d3bd.js";export{T as MessageFilter,Y as PinnedMessage,Z as PinnedMessageListQuery,_ as ReadStatus,X as ScheduledStatus}from"./lib/__bundle-0db5d3bd.js";import{c as xe,G as Ge,P as Ue,e as Ie}from"./lib/__bundle-be64b99f.js";export{G as GroupChannelListOrder,P as PublicGroupChannelListOrder,e as ScheduledMessageListOrder}from"./lib/__bundle-be64b99f.js";import{C as Oe}from"./lib/__bundle-6d49bcbf.js";export{s as MessageEventSource}from"./lib/__bundle-6d49bcbf.js";import{B as De}from"./lib/__bundle-56a69c37.js";import"./lib/__bundle-98af763f.js";import"./lib/__bundle-acd77193.js";import"./lib/__bundle-d7c543cc.js";var Pe,He={},Re=function(){function e(e){var t=e._iid,n=e.limit,a=void 0===n?100:n,r=this;this.ref=0,this._iid=t,this._limit=a;var i,s=d.of(this._iid),o=s.sdkState,l=s.dispatcher,u=s.logger,c=s.cacheContext,p=s.statManager;this._metadataKey=(i=o.userId,"sendbird:".concat(i,"@groupchannel/sync.meta"));var _=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(o.userId);this._sync=new xe(_,(function(){return h(r,void 0,void 0,(function(){var e,t,n,a,r,i,s,l,h,d,_,m,v,g,C,b;return f(this,(function(f){switch(f.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(f.sent(),u.debug("channel background sync from",null===(h=this._metadata)||void 0===h?void 0:h.token),null===(d=this._metadata)||void 0===d?void 0:d.completed)return[3,14];t={includeEmpty:!0,includeMetaData:!0,hiddenChannelFilter:me.ALL,order:Ge.CHRONOLOGICAL},f.label=2;case 2:if(f.trys.push([2,9,12,13]),t.order!==Ge.LATEST_LAST_MESSAGE)return[3,6];f.label=3;case 3:return f.trys.push([3,5,,6]),[4,c.preference.get(N(o.appId))];case 4:return n=f.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return f.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_e.of(this._iid).getMyGroupChannels(null!==(m=null===(_=this._metadata)||void 0===_?void 0:_.token)&&void 0!==m?m:"",t,this._limit,Oe.SYNC_CHANNEL_BACKGROUND)];case 7:return a=f.sent(),r=a.channels,i=a.token,e.hasNext=r.length>=this._limit&&!!i,e.nextToken=i,this._metadata&&(this._metadata.token=i,(l=this._metadata.range).extends.apply(l,L([],F(r.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),u.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return f.sent(),[3,13];case 9:return s=f.sent(),u.debug("channel background sync error",s),s instanceof A&&s.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:f.sent(),f.label=11;case 11:throw s;case 12:return p.put(new y({type:E.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:null!==(g=null===(v=c.localCacheConfig)||void 0===v?void 0:v.maxSize)&&void 0!==g?g:0,use_local_cache:c.localCacheEnabled,starting_point:0,message_init_policy:null!==(b=null===(C=t.order)||void 0===C?void 0:C.toString())&&void 0!==b?b:"",collection_id:o.userId}})),[7];case 13:return[3,15];case 14:e.hasNext=!1,e.nextToken="",f.label=15;case 15:return[2,e]}}))}))})),this._connectionEventContext=l.on((function(e){if(e instanceof v)if(e.stateType===g.CONNECTED)r.resume();else r.pause()}))}return e.of=function(t){return He[t]||(He[t]=new e({_iid:t})),He[t].ref++,He[t]},e.clear=function(e){He[e]&&(He[e].close(),delete He[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new fe({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return h(this,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,d.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata={token:e?e.token:"",range:new fe(e?e.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!e&&e.completed},t.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this._metadata?[4,d.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetaData=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,d.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e,t,n=d.of(this._iid),a=n.logger;n.sessionManager.session.hasSession&&(a.debug("channel background sync resume()"),this._sync.start(null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.token)&&void 0!==t?t:""))},e.prototype.pause=function(){d.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete He[this._iid])},e}(),Ve={},je=function(){function e(e){var t=e._iid,n=this;this.ref=0,this._iid=t;var a,r=d.of(this._iid),i=r.logger,s=r.sdkState,o=r.dispatcher,l=r.cacheContext,u=r.statManager;this._metadataKey=(a=s.userId,"sendbird:".concat(a,"@groupchannel/changelogs.meta")),this._subscribers=new x;var c=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(s.userId);this._sync=new xe(c,(function(){return h(n,void 0,void 0,(function(){var e,t,n,a,r,o,c,h,d,p,_,m;return f(this,(function(f){switch(f.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:f.sent(),i.debug("channel changelog sync from",null===(p=this._metadata)||void 0===p?void 0:p.token),f.label=2;case 2:f.trys.push([2,9,,12]),t={includeEmpty:!0,includeMetaData:!0},f.label=3;case 3:return f.trys.push([3,5,,6]),[4,l.preference.get(N(s.appId))];case 4:return n=f.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return f.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_e.of(this._iid).getMyGroupChannelChangeLogs(null!==(m=null===(_=this._metadata)||void 0===_?void 0:_.token)&&void 0!==m?m:"",t,Oe.SYNC_CHANNEL_CHANGELOGS)];case 7:return a=f.sent(),r=a.updatedChannels,o=a.deletedChannelUrls,c=a.hasMore,h=a.token,this._subscribers.dispatch("progress",{updatedChannels:r,deletedChannelUrls:o,hasMore:c,token:h}),e.hasNext=c,e.nextToken=h,this._metadata&&(this._metadata.token=h),i.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return f.sent(),l.localCacheEnabled&&u.put(new y({type:E.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:r.length>0||o.length>0?"cache_miss":"cache_hit",max_db_size:r.length,use_local_cache:l.localCacheEnabled,starting_point:0,message_init_policy:o.length.toString(),collection_id:s.userId}})),[3,12];case 9:return d=f.sent(),i.debug("channel changelog sync error",d),d instanceof A&&d.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:f.sent(),f.label=11;case 11:throw d;case 12:return[2,e]}}))}))})),this._sync.on("stop",(function(){n._subscribers.dispatch("pause")})),this._connectionEventContext=o.on((function(e){if(e instanceof v)if(e.stateType===g.CONNECTED)n.resume();else n.pause()}))}return e.of=function(t){return Ve[t]||(Ve[t]=new e({_iid:t})),Ve[t].ref++,Ve[t]},e.clear=function(e){Ve[e]&&(Ve[e].close(),delete Ve[e])},Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return h(this,void 0,void 0,(function(){var e,t,n,a;return f(this,(function(r){switch(r.label){case 0:return this._metadata?[3,2]:(e=d.of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:a=r.sent(),this._metadata={token:a?a.token:n},r.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this._metadata?[4,d.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,d.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.on=function(e,t){return this._subscribers.on(e,t)},e.prototype.resume=function(){d.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ve[this._iid])},e}(),Ke=function(e,t){return e.findIndex((function(e){return e.isIdentical(t)}))},ze=function(e,t,n){if(e.length>0){for(var a=Ke(e,t),r=0,i=e.length-1,s=Math.floor((r+i)/2);r<i;){var o=Qe(e[s],t,n);if(o>0)i=s,s=Math.floor((r+i)/2);else{if(!(o<0))return{place:s,oldPosition:a};r=s+1,s=Math.floor((r+i)/2)}}return{place:Qe(e[s],t,n)>=0?s:s+1,oldPosition:a}}return{place:e.length,oldPosition:-1}},Qe=function(e,t,n){switch(n){case Ge.LATEST_LAST_MESSAGE:return e.lastMessage&&t.lastMessage?0===(a=t.lastMessage.createdAt-e.lastMessage.createdAt)?t.createdAt-e.createdAt:a:e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case Ge.CHRONOLOGICAL:return t.createdAt-e.createdAt;case Ge.CHANNEL_NAME_ALPHABETICAL:var a;return 0===(a=e.name.localeCompare(t.name))?e.createdAt-t.createdAt:a;default:return 0}},We=function(){function e(e,t){var n=t.filter,a=void 0===n?new ge:n,r=t.order,i=void 0===r?Ge.LATEST_LAST_MESSAGE:r,s=t.limit,o=void 0===s?Fe:s,l=t.includeChangesOnInitialLoad,u=void 0!==l&&l,c=this;this.channels=[],this._isInitialized=!1,this._iid=e,this._key="gcc-".concat(V()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=u,this.filter=a,this.order=i,this._hasMore=!0,this._token="",this._limit=o;var p=d.of(this._iid),_=p.sdkState,m=p.cacheContext,y=p.dispatcher;m.localCacheEnabled&&(this._backgroundSync=Re.of(e),this._backgroundSync.resume()),this._changelogSync=je.of(e),this._changelogSync.resume(),_e.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,t){var n=t.source;if(ve(n)){var a=e.filter((function(e){return c.filter.match(e,_.userId)})),r=e.filter((function(e){return!c.filter.match(e,_.userId)})).map((function(e){return e.url}));a.length>0&&c._addChannelsToView(a,t),r.length>0&&c._removeChannelsFromView(r,t)}},onRemove:function(e,t){c._removeChannelsFromView(e,t)}}),y.on((function(e){e instanceof v&&(e.stateType===g.CONNECTED?c._isGetRemoteChannelsSucceeded||h(c,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):e.stateType===g.LOGOUT&&c.dispose())}))}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},e.prototype._addChannelsToView=function(e,t,n){var a,r,i,s,o=this;void 0===n&&(n=!1);var l=[],u=[],c=[];try{for(var d=I(e),p=d.next();!p.done;p=d.next()){var _=p.value,m=Ke(this.channels,_);m>=0&&this.channels.splice(m,1);var v=ze(this.channels,_,this.order).place;if(m<0)v===this.channels.length?!n&&this._hasMore||(l.push(_),this.channels.push(_)):(l.push(_),this.channels.splice(v,0,_));else switch(t.source){case Oe.EVENT_CHANNEL_UPDATED:case Oe.EVENT_MESSAGE_RECEIVED:case Oe.SYNC_CHANNEL_CHANGELOGS:case Oe.EVENT_MESSAGE_SENT:this.order===Ge.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&v===this.channels.length?c.push(_):(this.channels.splice(v,0,_),u.push(_));break;default:this.channels.splice(v,0,_),u.push(_)}}}catch(e){a={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(a)throw a.error}}if(c.length>0)try{for(var g=I(c),y=g.next();!y.done;y=g.next()){_=y.value;var C=Ke(this.channels,_);-1!==C&&this.channels.splice(C,1)}}catch(e){i={error:e}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}ve(t.source)&&R((function(){return h(o,void 0,void 0,(function(){var e,n,a;return f(this,(function(r){return l.length>0&&(null===(e=this._handler)||void 0===e?void 0:e.onChannelsAdded)&&this._handler.onChannelsAdded(t,l),u.length>0&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelsUpdated)&&this._handler.onChannelsUpdated(t,u),c.length>0&&(null===(a=this._handler)||void 0===a?void 0:a.onChannelsDeleted)&&this._handler.onChannelsDeleted(t,c.map((function(e){return e.url}))),[2]}))}))}))},e.prototype._removeChannelsFromView=function(e,t){var n,a,r=this,i=[],s=function(e){var t=o.channels.findIndex((function(t){return t.url===e}));t>=0&&(i.push(o.channels[t].url),o.channels.splice(t,1))},o=this;try{for(var l=I(e),u=l.next();!u.done;u=l.next()){s(u.value)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return ve(t.source)&&i.length>0&&R((function(){return h(r,void 0,void 0,(function(){var e;return f(this,(function(n){return(null===(e=this._handler)||void 0===e?void 0:e.onChannelsDeleted)&&this._handler.onChannelsDeleted(t,i),[2]}))}))})),i},e.prototype._getLocalChannels=function(){return h(this,void 0,void 0,(function(){var e,t;return f(this,(function(n){switch(n.label){case 0:return e=_e.of(this._iid),t=this.channels.length>0?function(e,t){var n,a,r,i;switch(t){case Ge.LATEST_LAST_MESSAGE:return null!==(a=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==a?a:e.createdAt;case Ge.CHRONOLOGICAL:return e.createdAt;case Ge.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(i=null===(r=e.lastMessage)||void 0===r?void 0:r.createdAt)&&void 0!==i?i:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,n.sent()]}}))}))},e.prototype._getRemoteChannels=function(){return h(this,void 0,void 0,(function(){var e,t,n;return f(this,(function(a){switch(a.label){case 0:return[4,_e.of(this._iid).getMyGroupChannels(this._token,K(z(z({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit)];case 1:return e=a.sent(),t=e.channels,n=e.token,this._token=n,this._hasMore=!!n,[2,t]}}))}))},e.prototype._revokeLoadMore=function(){return h(this,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,{source:Oe.REQUEST_CHANNEL},!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},e.prototype.loadMore=function(){var e;return h(this,void 0,void 0,(function(){var t,n,a,r,i,s,o,l,u,c,p,_,m,v,g,y,C,b,S,M=this;return f(this,(function(L){switch(L.label){case 0:if(this._isDisposed)throw new A({code:B.COLLECTION_DISPOSED,message:"Collection has been disposed."});return t=null,this._includeChangesOnInitialLoad&&0===this.channels.length&&this._changelogSync.isRunning?[4,new Promise((function(e){M._changelogSyncSubscriberContext=M._changelogSync.on("progress",(function(t){return e(t)})).on("pause",(function(){return e(null)}))}))]:[3,2];case 1:t=L.sent(),null===(e=this._changelogSyncSubscriberContext)||void 0===e||e.close(),L.label=2;case 2:return n=d.of(this._iid),a=n.cacheContext,r=n.connectionManager,i=n.statManager,this._isInitialized?[3,5]:(this._isInitialized=!0,a.localCacheEnabled?[4,this._backgroundSync.loadMetadata()]:[3,4]);case 3:L.sent(),L.label=4;case 4:i.put(new W({type:E.FEATURE_LOCALCACHE,data:{use_local_cache:a.localCacheEnabled,collection_interface:{group_channel:!0}}})),L.label=5;case 5:return s=[],this._hasMore?!a.localCacheEnabled||r.isConnected&&!this._backgroundSync.completed?[3,7]:[4,J((function(){return h(M,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return s=e.sent(),[2]}}))}))}))]:[3,11];case 6:return L.sent(),this._hasMore=s.length>=this._limit,[3,10];case 7:return L.trys.push([7,9,,10]),[4,this._getRemoteChannels()];case 8:return s=L.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,10];case 9:return L.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,10];case 10:this._addChannelsToView(s,{source:Oe.REQUEST_CHANNEL},!0),L.label=11;case 11:if(t){try{for(o=I(t.updatedChannels),l=o.next();!l.done;l=o.next())u=l.value,(g=Ke(s,u))>=0?s[g]=u:(c=ze(s,u,this.order).place,s.splice(c,0,u))}catch(e){y={error:e}}finally{try{l&&!l.done&&(C=o.return)&&C.call(o)}finally{if(y)throw y.error}}p=s.map((function(e){return e.url}));try{for(_=I(t.deletedChannelUrls),m=_.next();!m.done;m=_.next())v=m.value,(g=p.indexOf(v))>=0&&(s.splice(g,1),p.splice(g,1))}catch(e){b={error:e}}finally{try{m&&!m.done&&(S=_.return)&&S.call(_)}finally{if(b)throw b.error}}}return[2,s]}}))}))},e.prototype.dispose=function(){var e,t,n;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._changelogSyncSubscriberContext)||void 0===n||n.close(),_e.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),Be=function(e){function t(t){var n=this,a=t.token,r=t.limit,i=t.order,s=t.includeEmpty,o=t.membershipFilter,l=t.channelNameContainsFilter,u=t.channelUrlsFilter,c=t.customTypesFilter,h=t.customTypeStartsWithFilter,d=t.superChannelFilter,p=t.metadataOrderKeyFilter,f=t.metadataKey,_=t.metadataValues,m=t.metadataValueStartsWith,v=t.includeFrozen,g=t.includeMetaData;return(n=e.call(this)||this).method=ee.GET,n.path=te,n.params=ne(K({token:a,limit:r,order:i,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:s,public_mode:ye.PUBLIC,public_membership_mode:o,name_contains:l,channel_urls:u,custom_types:c,custom_type_startswith:h,super_mode:d,metadata_order_key:p,metadata_key:f,metadata_values:_,metadata_value_startswith:m,show_frozen:v,show_metadata:g})),n}return $(t,e),t}(ae),qe=function(e){function t(t,n){var a=e.call(this,t,n)||this;a.channels=[];var r=n.next,i=n.channels,s=n.ts;return a.token=r,i&&i.length>0&&(a.channels=i.map((function(e){return e.ts=s,new Ce(t,e)}))),a.ts="number"==typeof s?s:0,a}return $(t,e),t}(re);!function(e){e.ALL="all",e.JOINED="joined"}(Pe||(Pe={}));var Xe=function(e){function t(t,n){var a,r,i,s,o,l,u,c,h,d,p,f,_,m,v=this;return(v=e.call(this,t,n)||this).includeEmpty=!1,v.includeFrozen=!0,v.includeMetaData=!0,v.channelUrlsFilter=null,v.customTypesFilter=null,v.customTypeStartsWithFilter=null,v.channelNameContainsFilter=null,v.membershipFilter=Pe.ALL,v.superChannelFilter=be.ALL,v.metadataKey=null,v.metadataValues=null,v.metadataOrderKeyFilter=null,v.metadataValueStartsWith=null,v.order=Ue.CHRONOLOGICAL,v.includeEmpty=null!==(a=n.includeEmpty)&&void 0!==a&&a,v.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,v.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,v.channelUrlsFilter=null!==(s=n.channelUrlsFilter)&&void 0!==s?s:null,v.customTypesFilter=null!==(o=n.customTypesFilter)&&void 0!==o?o:null,v.customTypeStartsWithFilter=null!==(l=n.customTypeStartsWithFilter)&&void 0!==l?l:null,v.channelNameContainsFilter=null!==(u=n.channelNameContainsFilter)&&void 0!==u?u:null,v.membershipFilter=null!==(c=n.membershipFilter)&&void 0!==c?c:Pe.ALL,v.superChannelFilter=null!==(h=n.superChannelFilter)&&void 0!==h?h:be.ALL,v.metadataKey=null!==(d=n.metadataKey)&&void 0!==d?d:null,v.metadataValues=null!==(p=n.metadataValues)&&void 0!==p?p:null,v.metadataOrderKeyFilter=null!==(f=n.metadataOrderKeyFilter)&&void 0!==f?f:null,v.metadataValueStartsWith=null!==(_=n.metadataValueStartsWith)&&void 0!==_?_:null,v.order=null!==(m=n.order)&&void 0!==m?m:Ue.CHRONOLOGICAL,v}return $(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&ie("boolean",this.includeEmpty)&&ie("boolean",this.includeFrozen)&&ie("boolean",this.includeMetaData)&&ie("string",this.channelNameContainsFilter,!0)&&se("string",this.channelUrlsFilter,!0)&&se("string",this.customTypesFilter,!0)&&ie("string",this.customTypeStartsWithFilter,!0)&&oe(Pe,this.membershipFilter)&&oe(be,this.superChannelFilter)&&oe(Ue,this.order)&&ie("string",this.metadataOrderKeyFilter,!0)&&ie("string",this.metadataKey,!0)&&se("string",this.metadataValues,!0)&&ie("string",this.metadataValueStartsWith,!0)},t.prototype.next=function(){return h(this,void 0,void 0,(function(){var e,t,n,a,r,i,s;return f(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=d.of(this._iid).requestQueue,n=new Be(K(z(z({},this),{token:this._token}))),[4,t.send(n)]):[3,2]):[3,5];case 1:return a=o.sent(),r=a.as(qe),i=r.channels,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,e];case 3:throw A.queryInProgress;case 4:return[3,6];case 5:throw A.invalidParameters;case 6:return[2]}}))}))},t}(le),Ye=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return $(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserJoined=ue,t.onUserLeft=ue,t.onUserReceivedInvitation=ue,t.onUserDeclinedInvitation=ue,t.onChannelHidden=ue,t.onUnreadMemberStatusUpdated=ue,t.onUndeliveredMemberStatusUpdated=ue,t.onTypingStatusUpdated=ue,t.onPollUpdated=ue,t.onPollVoted=ue,t.onPollDeleted=ue,t.onPinnedMessageUpdated=ue,t}return $(t,e),t}(De)),Je=function(e){function t(t){var n=this,a=t.token,r=t.limit,i=t.order,s=t.reverse,o=t.channelUrl,l=t.messageTypeFilter,u=t.scheduledStatus;return(n=e.call(this)||this).method=ee.GET,n.path="".concat(ce),n.params=ne(K({token:a,limit:r,reverse:s,channel_url:o,order:i,message_type:l,status:u})),n}return $(t,e),t}(ae),Ze=function(e){function t(t,n){var a=e.call(this,t,n)||this;a.scheduledMessages=[];var r=n.next,i=n.scheduled_messages;return a.token=r,a.scheduledMessages=i.map((function(e){return ke(t,e)})),a}return $(t,e),t}(re),$e=function(e){function t(t,n){var a,r,i,s,o,l=this;return(l=e.call(this,t,n)||this).channelUrl=null,l.order=null,l.reverse=!1,l.scheduledStatus=null,l.messageTypeFilter=he.ALL,l.channelUrl=null!==(a=n.channelUrl)&&void 0!==a?a:null,l.order=null!==(r=n.order)&&void 0!==r?r:null,l.reverse=null!==(i=n.reverse)&&void 0!==i&&i,l.scheduledStatus=null!==(s=n.scheduledStatus)&&void 0!==s?s:null,l.messageTypeFilter=null!==(o=n.messageTypeFilter)&&void 0!==o?o:he.ALL,l}return $(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&ie("string",this.channelUrl,!0)&&(oe(Ie,this.order)||null===this.order)&&ie("boolean",this.reverse)&&(se(Ne,this.scheduledStatus)||null===this.scheduledStatus)&&oe(he,this.messageTypeFilter)},t.prototype.next=function(){return h(this,void 0,void 0,(function(){var e,t,n,a,r,i;return f(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=d.of(this._iid).requestQueue,t=new Je(K(z(z({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),a=n.as(Ze),r=a.scheduledMessages,i=a.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw A.queryInProgress;case 4:return[3,6];case 5:throw A.invalidParameters;case 6:return[2]}}))}))},t}(le),et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return $(t,e),t.prototype.init=function(t,n){var a=n.sdkState,r=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,u=n.cacheContext;e.prototype.init.call(this,t,{sdkState:a,dispatcher:r,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:u}),this._manager=new _e(t,{sdkState:a,cacheContext:u,dispatcher:r,sessionManager:i,requestQueue:s,logger:o})},t.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new We(this._iid,e)},t.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new Se(this._iid,e)},t.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new Xe(this._iid,e)},t.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new $e(this._iid,e)},t.prototype.addGroupChannelHandler=function(e,t){de(ie("string",e)&&t instanceof Ye).throw(A.invalidParameters),this._manager.addHandler(e,t)},t.prototype.removeGroupChannelHandler=function(e){de(ie("string",e)).throw(A.invalidParameters),this._manager.removeHandler(e)},t.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},t.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},t.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},t.prototype.getChannel=function(e){return h(this,void 0,void 0,(function(){return f(this,(function(t){return de(ie("string",e)).throw(A.invalidParameters),[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return h(this,void 0,void 0,(function(){return f(this,(function(t){return de(ie("string",e)).throw(A.invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.getMyGroupChannelChangeLogsByToken=function(e,t){return void 0===t&&(t={}),h(this,void 0,void 0,(function(){var n;return f(this,(function(a){switch(a.label){case 0:return n=z(z({},Me),t),de(ie("string",e)&&Ee(n)).throw(A.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,a.sent()]}}))}))},t.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,t){return void 0===t&&(t={}),h(this,void 0,void 0,(function(){var n;return f(this,(function(a){switch(a.label){case 0:return n=z(z({},Me),t),de(ie("number",e)&&Ee(n)).throw(A.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,a.sent()]}}))}))},t.prototype.getGroupChannelCount=function(e){return h(this,void 0,void 0,(function(){var t;return f(this,(function(n){return t=z(z({},Ae),e),de(Le(t)).throw(A.invalidParameters),[2,this._manager.getGroupChannelCount(t)]}))}))},t.prototype.getUnreadItemCount=function(e){return void 0===e&&(e={}),h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalUnreadChannelCount=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},t.prototype.getTotalUnreadMessageCount=function(e){return void 0===e&&(e={}),h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},t.prototype.createChannel=function(e){return void 0===e&&(e={}),h(this,void 0,void 0,(function(){var t;return f(this,(function(n){return t=z(z({},we),e),de(Te(t)).throw(A.invalidParameters),[2,this._manager.createChannel(t)]}))}))},t.prototype.createDistinctChannelIfNotExist=function(e){return void 0===e&&(e={}),h(this,void 0,void 0,(function(){var t;return f(this,(function(n){return t=z(z({},we),e),de(Te(t)).throw(A.invalidParameters),t&&(t.isDistinct=!0),[2,this.createChannel(t)]}))}))},t.prototype.createChannelWithUserIds=function(e,t,n,a,r,i){return void 0===t&&(t=!1),void 0===r&&(r=""),void 0===i&&(i=""),h(this,void 0,void 0,(function(){var s;return f(this,(function(o){return s=z(z({},we),{invitedUserIds:e,isDistinct:t,name:n,data:r,customType:i}),"string"==typeof a?s.coverUrl=a:s.coverImage=a,[2,this.createChannel(s)]}))}))},t.prototype.markAsReadAll=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},t.prototype.markAsReadWithChannelUrls=function(e){return h(this,void 0,void 0,(function(){return f(this,(function(t){return de(se("string",e)).throw(A.invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},t.prototype.markAsDelivered=function(e){return h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return de(ie("string",e)).throw(A.invalidParameters),[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},t}(pe);export{We as GroupChannelCollection,Ye as GroupChannelHandler,et as GroupChannelModule,Pe as MembershipFilter,Xe as PublicGroupChannelListQuery,$e as ScheduledMessageListQuery};
