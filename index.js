import{i as e,a as i,_ as a,b as u,C as c,c as d,E as l,A as h,d as f,e as p,u as v,f as g,g as m,h as b,U as _,j as w,P as k,k as I,l as T,m as A,n as N,S as M,L as Q,o as j,p as q,V as x,q as K,r as W,v as V,s as Z,t as X,w as Y,x as ee,y as te,z as ne,B as re,D as ie,F as se,G as oe,H as ue,W as ce,I as de,J as le,K as he,M as fe,N as pe,O as ve,Q as ge,R as me,T as be,X as _e,Y as ye,Z as we,$ as ke,a0 as Se,a1 as Ie,a2 as Ce,a3 as Ee,a4 as Te}from"./lib/__bundle-b6cf2704.js";export{a5 as AppInfo,a7 as CachedChannelInfo,a8 as CachedDataClearOrder,C as ChannelType,a6 as CollectionEventSource,s as ConnectionState,a1 as DeviceOsPlatform,a9 as LastMessageThreadingPolicy,L as LocalCacheConfig,aa as NotificationInfo,a4 as PushTemplate,$ as PushTokenRegistrationState,P as PushTokenType,a3 as PushTriggerOption,ab as ReportCategoryInfo,ac as Role,S as SendbirdChatOptions,t as SendbirdError,ad as SendbirdErrorCode,ai as SendbirdPlatform,ah as SendbirdProduct,ae as UIKitConfigInfo,af as UnreadCountThreadingPolicy,U as User,ag as UserOnlineState}from"./lib/__bundle-b6cf2704.js";import{N as Pe,a as De,b as Ue,c as Oe,g as Ae,M as Ne,d as Me,e as Le,f as Re,h as ze,i as Qe,j as je,k as Fe,l as qe,m as xe,L as He,n as Ke,o as Ge,p as We,A as Ve,I as Be,q as Je,U as Ze,C as $e,r as Xe,B as Ye,F as et,s as tt,S as nt,t as rt,u as it,v as st,w as ot,x as at}from"./lib/__bundle-7c21b511.js";export{r as ApplicationUserListQuery,y as BannedUserListQuery,z as BaseChannel,B as BlockedUserListQuery,C as ConnectionHandler,F as FriendListQuery,n as LogLevel,o as MemoryStore,D as MutedUserListQuery,O as OperatorListQuery,P as Participant,E as Plugin,R as ReportCategory,G as RestrictedUser,H as RestrictionInfo,J as RestrictionType,S as SessionHandler,U as UserEventHandler}from"./lib/__bundle-7c21b511.js";import{PollModule as ut}from"./poll.js";import{g as ct,G as dt,A as lt,U as ht,a as ft,b as pt,S as vt,c as gt,d as mt,D as bt,R as _t}from"./lib/__bundle-31635626.js";import{g as yt,N as wt}from"./lib/__bundle-0f824378.js";import"./lib/__bundle-acd77193.js";var kt=function(e){this.key=e.key,this.url=e.url},St=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map((function(e){return new kt(e)})):[]},It=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new St(e)})):[]},Ct={profileImage:void 0,profileUrl:void 0,nickname:void 0},Et=function(e){return function(t,n){return a(void 0,void 0,void 0,(function(){var r,i,s,o;return u(this,(function(d){switch(d.label){case 0:switch(t){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4]}return[3,11];case 1:return n(),[3,12];case 2:return[4,e.reset()];case 3:return d.sent(),n(),[3,12];case 4:return d.trys.push([4,9,,10]),r=function(e){return{v2:function(){return a(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e.commitSchema([{collectionName:De,keyName:Ue,index:[ct(dt.LATEST_LAST_MESSAGE),ct(dt.CHRONOLOGICAL),ct(dt.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:Pe,keyName:Oe,index:[Ae(Ne.CHANNEL_LATEST),Ae(Ne.NEWEST_CHILD_MESSAGE)]},{collectionName:Me,keyName:Le,index:[Ae(Ne.CHANNEL_LATEST),Ae(Ne.NEWEST_CHILD_MESSAGE)]},{collectionName:Re,keyName:ze}])];case 1:return[2,t.sent()]}}))}))},v3:function(){return a(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e.commitSchema([{collectionName:Qe,keyName:je,index:[yt("latest_last_message")]}])];case 1:return[2,t.sent()]}}))}))},v4:function(){return a(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e.commitSchema([{collectionName:Fe,keyName:qe,index:[xe()]}])];case 1:return[2,t.sent()]}}))}))}}}(e),i=r.v2,s=r.v3,o=r.v4,[4,i()];case 5:return d.sent(),[4,s()];case 6:return d.sent(),[4,o()];case 7:return d.sent(),[4,e.collection(Pe).removeIf({where:{channelType:c.OPEN}})];case 8:case 9:return d.sent(),[3,10];case 10:return n(),[3,12];case 11:n(),d.label=12;case 12:return[2]}}))}))}},Tt=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},Pt=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?Tt:n,i=t.initialState,s=void 0===i?"visible":i,o=t.isEnabled,a=void 0===o||o,u=t.pauseCheckDelay,c=void 0===u?3e4:u,d=e.call(this)||this;return d._pauseCheckDelay=3e4,d._currentState="visible",d._getVisibilityState=r,d._pauseCheckDelay=c,d._currentState=s,d._isEnabled=a,d._boundToggleState=d._toggleState.bind(d),d}return d(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(l),Dt=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:h.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),Ut=function(e){function t(t){var n,r=this;return(r=e.call(this)||this).method=h.GET,r.path=f,r.params=p(v({ts:"number"==typeof t.token?t.token:void 0,token:"string"==typeof t.token?t.token:void 0,limit:null!==(n=t.limit)&&void 0!==n?n:100})),r}return d(t,e),t}(g),Ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.configs=n.configs,r.hasMore=n.has_more,r.nextToken=n.next,r.ts=n.ts,r}return d(t,e),t}(m),At=function(e){function t(t){var n=t.userId,r=t.nickname,i=t.profileUrl,s=t.profileImage,o=t.preferredLanguages,a=e.call(this)||this;return a.method=h.PUT,a.path="".concat(b,"/").concat(encodeURIComponent(n)),a.params=p(v({nickname:r,profile_url:i,profile_file:s,preferred_languages:o})),a}return d(t,e),t}(g),Nt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _(t,w({},n)),r}return d(t,e),t}(m),Mt=function(e){function t(t){var n=t.userId,r=t.token,i=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,a=e.call(this)||this;return a.method=h.POST,a.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/apns"),a.params=p({apns_device_token:r,always_push:!0,device_os:i,device_manufacturer:s,system_push_enabled:o}),a}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?k[n.type.toLowerCase()]:k.UNKNOWN,r.user=new _(t,n.user),r}d(t,e)}(m);var Lt=function(e){function t(t){var n=t.userId,r=t.token,i=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,a=e.call(this)||this;return a.method=h.POST,a.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/gcm"),a.params=p({gcm_reg_token:r,always_push:!0,device_os:i,device_manufacturer:s,system_push_enabled:o}),a}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?k[n.type.toLowerCase()]:k.UNKNOWN,r.user=new _(t,n.user),r}d(t,e)}(m);var Rt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=h.DELETE,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),i}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}d(t,e)}(m);var zt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=h.DELETE,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),i}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}d(t,e)}(m);var Qt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.DELETE,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/apns"),r}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?k[n.type.toLowerCase()]:k.UNKNOWN,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}d(t,e)}(m);var jt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.DELETE,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/gcm"),r}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?k[n.type.toLowerCase()]:k.UNKNOWN,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}d(t,e)}(m);var Ft=function(e){function t(t){var n=t.userId,r=t.type,i=t.token,s=t.ts,o=e.call(this)||this;return o.method=h.GET,o.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),o.params={created_ts:s,token:i},o}return d(t,e),t}(g),qt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?k[n.type.toLowerCase()]:k.UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return d(t,e),t}(m),xt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return d(t,e),t}(g),Ht=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return d(t,e),t}(m),Kt=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,i=e.call(this)||this;return i.method=h.PUT,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),i.params={auto_accept:r},i}return d(t,e),t}(g),Gt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return d(t,e),t}(m),Wt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/push_preference"),r}return d(t,e),t}(g),Vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return d(t,e),t}(m),Bt=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,i=t.startHour,s=t.startMin,o=t.endHour,a=t.endMin,u=t.timezone,c=e.call(this)||this;return c.method=h.PUT,c.path="".concat(b,"/").concat(encodeURIComponent(n),"/push_preference"),c.params={do_not_disturb:r,start_hour:i,start_min:s,end_hour:o,end_min:a,timezone:u},c}return d(t,e),t}(g),Jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return d(t,e),t}(m),Zt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/push_preference"),r}return d(t,e),t}(g),$t=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return d(t,e),t}(m),Xt=function(e){function t(t){var n=t.userId,r=t.snoozeOn,i=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=h.PUT,o.path="".concat(b,"/").concat(encodeURIComponent(n),"/push_preference"),o.params={snooze_enabled:r,snooze_start_ts:i,snooze_end_ts:s},o}return d(t,e),t}(g),Yt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return d(t,e),t}(m),en=function(e){function t(t){var n=t.userId,r=t.blockedUserId,i=e.call(this)||this;return i.method=h.POST,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/block"),i.params={target_id:r},i}return d(t,e),t}(g);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _(t,n),r}d(t,e)}(m);var tn=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,i=e.call(this)||this;return i.method=h.DELETE,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),i}return d(t,e),t}(g);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var nn=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/push_preference"),r}return d(t,e),t}(g),rn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return d(t,e),t}(m),sn=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,i=e.call(this)||this;return i.method=h.PUT,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/push_preference"),i.params={push_trigger_option:r},i}return d(t,e),t}(g),on=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return d(t,e),t}(m),an=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/template"),r}return d(t,e),t}(g),un=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return d(t,e),t}(m),cn=function(e){function t(t){var n=t.userId,r=t.templateName,i=e.call(this)||this;return i.method=h.PUT,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/push/template"),i.params={name:r},i}return d(t,e),t}(g),dn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return d(t,e),t}(m),ln=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=h.GET,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/friends/changelogs"),i.params={token:r},i}return d(t,e),t}(g),hn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new _(t,e)})),updatedUsers:n.updated.map((function(e){return new _(t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return d(t,e),t}(m),fn=function(e){function t(t){var n=t.userId,r=t.discoveries,i=e.call(this)||this;return i.method=h.PUT,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},i}return d(t,e),t}(g),pn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return d(t,e),t}(m),vn=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,i=e.call(this)||this;return i.method=h.DELETE,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discovery_keys:r},i}return d(t,e),t}(g);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var gn=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=h.POST,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return d(t,e),t}(g),mn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _(t,e)})),r}return d(t,e),t}(m),bn=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=h.DELETE,i.path="".concat(b,"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return d(t,e),t}(g);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var _n=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(b,"/").concat(n,"/allow_friend_discovery"),r.params={},r}return d(t,e),t}(g),yn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return d(t,e),t}(m),wn=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,i=e.call(this)||this;return i.method=h.PUT,i.path="".concat(b,"/").concat(n,"/allow_friend_discovery"),i.params={allow_friend_discovery:r},i}return d(t,e),t}(g);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}d(t,e)}(m);var kn,Sn=function(e){function t(){var t=e.call(this)||this;return t.method=h.GET,t.path=I,t}return d(t,e),t}(g),In=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new It(n),r}return d(t,e),t}(m),Cn=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(I,"/").concat(n),r}return d(t,e),t}(g),En=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new St(n),r}return d(t,e),t}(m),Tn=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=h.GET,r.path="".concat(T,"/").concat(n),r}return d(t,e),t}(g),Pn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new kt(n),r}return d(t,e),t}(m),Dn=function(e){function t(){var t=e.call(this)||this;return t.method=h.GET,t.path="".concat(A),t}return d(t,e),t}(g),Un=function(e){function t(t,n){var r,i=this,s=null!=n?n:{};return(i=e.call(this,t,n)||this).uikitConfiguration={string:JSON.stringify(s),json:s},i.updatedAt=null!==(r=null==n?void 0:n.updated_at)&&void 0!==r?r:0,i}return d(t,e),t}(m);!function(e){e.DELIVERED="DELIVERED",e.CLICKED="CLICKED"}(kn||(kn={}));var On,An=function(e){function t(t){var n=t.deviceToken,r=t.pushTrackingId,i=t.messageId,s=t.allowedPushNotification,o=t.channelKey,a=t.templateKey,u=t.eventType,c=t.notificationEventDeadline,d=e.call(this)||this;return d.method=h.POST,d.path=N,d.params=p({device_token:n,push_tracking_id:r,message_id:i,allowed_push_notification:s,channel_key:o,template_key:a,event_type:u,notification_event_deadline:c}),d}return d(t,e),t}(g);var Nn=function(){function t(e,t,n){var r=this;this._storeInitialized=!1,this._iid=e,this.options=t;var i=x.of(e),s=i.sdkState,o=i.cacheContext,c=i.dispatcher,d=i.sessionManager,l=i.requestQueue,h=i.logger,f=i.userEventHandlers,p=i.appStateToggleEnabled;this._onlineDetector=new Dt({logger:h,connectionDelegate:{reconnect:function(){return a(r,void 0,void 0,(function(){var t,n,r,i,s,o;return u(this,(function(a){switch(a.label){case 0:if(t=x.of(e),n=t.sdkState,r=t.connectionManager,(i=t.sessionManager).session.hasSession)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.connect(i.session.authToken)];case 2:return a.sent(),[3,4];case 3:if(s=a.sent(),_e(s))throw s;return h.debug("connect failed by reconnect event = ",s),[3,4];case 4:return[3,9];case 5:if("foreground"!==n.appState)return[3,9];a.label=6;case 6:return a.trys.push([6,8,,9]),[4,r.resetAndReconnect()];case 7:return a.sent(),[3,9];case 8:if(o=a.sent(),_e(o))throw o;return h.debug("resetAndReconnect failed by reconnect event = ",o),[3,9];case 9:return c.dispatch(new wt),[2]}}))}))},disconnect:function(){se((function(){return a(r,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,x.of(e).connectionManager.disconnect()];case 1:return t.sent(),[2]}}))}))}))}}});var v=new lt(e,{localCacheEnabled:o.localCacheEnabled,enableAutoResend:o.localCacheConfig.enableAutoResend,dispatcher:c,sdkState:s,logger:h});n.forEach((function(t){t.init(e,{sdkState:s,cacheContext:o,dispatcher:c,sessionManager:d,requestQueue:l,logger:h,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new Pt({isEnabled:p}),this._appStateChangeDetector.on("resume",(function(){h.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){h.debug("the page freezes"),r.setBackgroundState()})),c.on((function(t){var n;if(t instanceof oe){if(t.stateType===ue.CONNECTED)v.processNonAutoResendRegisteredPendingMessages()}else if(t instanceof ce){if("USEV"===t.code){var i=t.as(ht).event;if(i.category===ft.FRIEND_DISCOVERED){var c=pt.getDataAsFriendDiscoveredEvent(e,i).friendDiscoveries;de((function(){return a(r,void 0,void 0,(function(){return u(this,(function(e){return[2,f.forEach((function(e){e.onFriendsDiscovered&&e.onFriendsDiscovered(c)}))]}))}))}))}}}else if(t instanceof le){var d=x.of(r._iid).subscribedUnreadMessageCount,l=!1,p=t.ts;"number"==typeof p&&p>d.ts&&(d.all!==t.all&&(l=!0),d.all=t.all>=0?t.all:0,t.customTypes&&Object.keys(t.customTypes).forEach((function(e){d.customTypes[e]!==t.customTypes[e]&&(l=!0),d.customTypes[e]=t.customTypes[e]})),l=l&&d.ts>0,d.ts=p),l&&de((function(){return a(r,void 0,void 0,(function(){return u(this,(function(e){return[2,f.forEach((function(e){e.onTotalUnreadMessageCountChanged&&e.onTotalUnreadMessageCountChanged({groupChannelCount:d.all,feedChannelCount:d.feed,customTypeUnreadCount:d.customTypes}),e.onTotalUnreadMessageCountUpdated&&e.onTotalUnreadMessageCountUpdated(d.all,d.customTypes)}))]}))}))}))}else t instanceof he?(o.preference.set(r._getUserProfileCacheKey(s.userId),fe.payloadify(t.userProfile)),(null===(n=t.userProfile.appInfo.notificationInfo)||void 0===n?void 0:n.isEnabled)&&o.preference.set(pe(r.appId),{value:!0})):t instanceof ve?t.configSyncNeeded&&se((function(){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._getAppConfigsInfo()];case 1:return e.sent(),[2]}}))}))})):t instanceof vt?o.preference.set(ge(r.appId),{configTs:t.configTs}):t instanceof me&&t.error&&t.error.isSessionInvalidatedError&&(h.debug("session revoked."),r._internalDisconnect(t.error))}))}return t.init=function(e){var n=e.appId,r=e.appVersion,i=e.modules,s=void 0===i?[]:i,o=e.options,a=void 0===o?new M:o,u=e.debugMode,c=void 0!==u&&u,d=e.customApiHost,l=e.customWebSocketHost,h=e.newInstance,f=void 0!==h&&h,p=e.logLevel,v=e.localCacheEnabled,g=void 0!==v&&v,m=e.localCacheConfig,b=void 0===m?new Q:m,_=e.localCacheEncryption,y=e.useAsyncStorageStore,w=void 0===y?null:y,k=e.useMMKVStorageStore,S=void 0===k?null:k,I=e.appStateToggleEnabled,C=void 0===I||I;if(!On||f){var E="su-".concat(j()),T=null!=_?_:{encrypt:function(e){return e},decrypt:function(e){return e}},P=new He;P.level=null!=p?p:Ke.WARN;var D=new Ge({encryption:T});c||(q()?S?D=new We({MMKV:S,encryption:T}):w&&(D=new Ve({AsyncStorage:w,encryption:T}),P.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")):D=new Be({encryption:T})),new x(E,{appId:n,appVersion:r,options:a,apiHost:null!=d?d:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=l?l:"wss://ws-".concat(n,".sendbird.com"),store:D,encryption:T,logger:P,localCacheEnabled:g,localCacheConfig:b,debugMode:c,appStateToggleEnabled:C});var U=[new Je,new ut],O=new t(E,a,K(K([],W(s),!1),W(U),!1));return On||(On=O),O}return On},Object.defineProperty(t,"instance",{get:function(){return On},enumerable:!1,configurable:!0}),Object.defineProperty(t,"version",{get:function(){return V},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appId",{get:function(){return x.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appInfo",{get:function(){var e=x.of(this._iid).appInfo;return null!=e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appVersion",{get:function(){var e;return null!==(e=x.of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugMode",{get:function(){return!!x.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return x.of(this._iid).logger.level},set:function(e){x.of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCacheEnabled",{get:function(){return x.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheConfig",{get:function(){var e=x.of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ekey",{get:function(){return x.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentUser",{get:function(){var e;return null!==(e=x.of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){var e=x.of(this._iid).connectionManager;return e.isConnected?Z.OPEN:e.isConnecting?Z.CONNECTING:Z.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastConnectedAt",{get:function(){var e=x.of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fcmPushToken",{get:function(){var e;return null!==(e=this._fcmPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"apnsPushToken",{get:function(){var e;return null!==(e=this._apnsPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),t.prototype._getNestDBVersion=function(){return 7},t.prototype._getPreferenceVersion=function(){return 9},t.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},t.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},t.prototype._internalDisconnect=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return t=x.of(this._iid),n=t.connectionManager,r=t.sdkState,i=t.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),i.cancelAll(),[4,n.logout(e)];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),r.appState="foreground",[2]}}))}))},t.prototype._getAppConfigsInfo=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,c,d=this;return u(this,(function(l){switch(l.label){case 0:return e=x.of(this._iid),t=e.requestQueue,n=e.dispatcher,r=e.cacheContext,i=e.sdkState,s={},[4,r.preference.get(ge(i.appId))];case 1:return(c=l.sent())&&(o=c.configTs),new gt("appConfigsInfo",(function(e){return a(d,void 0,void 0,(function(){var r,i,o,a,c,d,l,h;return u(this,(function(u){switch(u.label){case 0:return r={hasNext:!0,nextToken:e},i=new Ut({token:e}),[4,t.send(i)];case 1:return o=u.sent(),a=o.as(Ot),c=a.configs,d=a.hasMore,l=a.nextToken,h=a.ts,Object.keys(c).forEach((function(e){s[e]=c[e]})),r.hasNext=d,r.nextToken=l,d||n.dispatch(new mt({appConfigsInfo:s,configTs:h})),[2,r]}}))}))})).start(o),[2]}}))}))},t.prototype.getMemoryStoreForDebugging=function(){var e=x.of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof Ge?n.store:null;throw X.debugModeRequired},t.prototype.addExtension=function(e,t){var n=x.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&n.extensions&&(n.extensions[e]=t)},t.prototype.addSendbirdExtensions=function(e,t,n){var r,i,s=x.of(this._iid),o=s.logger,a=s.sdkState,u=new RegExp(be);if(0===e.length)return o.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(e.find((function(e){return!u.test(e.version)})))return o.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(n)try{for(var c=Y(Object.entries(n)),d=c.next();!d.done;d=c.next()){var l=W(d.value,2),h=l[0],f=l[1];if(/&|=/.test(h)||/&|=/.test(f))return o.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a.sendbirdRuntimeEnvironment={sendbirdExtensions:e,deviceOS:t,customData:n},!0},t.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},t.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},t.prototype._safeInitializeStore=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:t=x.of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.replaceStore(new Ge),[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.setLocaleForChatbot=function(e){var t=x.of(this._iid).sdkState,n=function(e){return e.replace(/[^a-zA-Z-_.]/g,"")}(e.trim());n&&(t.localeForChatbot=n)},t.prototype.initializeCache=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,c,d;return u(this,(function(u){switch(u.label){case 0:if(t=x.of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.dispatcher,s=t.logger,n.userId&&n.userId===e)return[3,13];o="sendbird@".concat(n.appId,"/").concat(e,".db"),u.label=1;case 1:return u.trys.push([1,9,11,13]),r.localCacheEnabled?r.nestdb&&r.nestdb.state!==st.CLOSED&&r.nestdb.name===o?[3,3]:(a="sendbird@".concat(n.appId,"/").concat(e,".db"),(c=r.nestdb=new ot({name:a,version:this._getNestDBVersion(),store:r.store,config:new at({dbname:a,itemSizeLimit:61440})})).on("upgrade",Et(c)),c.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,c.on("upgrade",Et(c))})),[4,c.open()]):[3,6];case 2:return u.sent(),this._storeInitialized=!0,i.dispatch(new bt(this._iid,{userId:e})),[3,5];case 3:return[4,this._safeInitializeStore(o)];case 4:u.sent(),u.label=5;case 5:return n.userId=e,[3,8];case 6:return[4,this._safeInitializeStore(o)];case 7:u.sent(),n.userId=e,u.label=8;case 8:return[3,13];case 9:return d=u.sent(),s.warn("Nest DB Open Failed. ",d),r.store instanceof Ge||(r.replaceStore(new Ge),r.localCacheEnabled=!1),[4,this._safeInitializeStore(o)];case 10:throw u.sent(),n.userId=e,X.databaseError;case 11:return[4,this._setupPreference(e)];case 12:return u.sent(),[7];case 13:return[2]}}))}))},t.prototype.getCacheDataSize=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return(e=x.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},t.prototype.clearCachedData=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return(e=x.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},t.prototype.clearCachedMessages=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(i){switch(i.label){case 0:return te(ye("string",e)).throw(X.invalidParameters),t=rt.of(this._iid),n=it.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return a(r,void 0,void 0,(function(){return u(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype._setupPreference=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return u(this,(function(o){switch(o.label){case 0:return t=x.of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.statManager,[4,r.preference.init(this._getPreferenceCacheKey(e),this._getPreferenceVersion())];case 1:return o.sent(),[4,r.preference.get(this._getUserProfileCacheKey(e))];case 2:return(s=o.sent())&&new fe(this._iid,s).apply(),[4,i.init("sendbird@".concat(n.appId,"/").concat(e,".statlog"))];case 3:return o.sent(),[2]}}))}))},t.prototype._ready=function(e,t,n){return void 0===n&&(n={}),a(this,void 0,void 0,(function(){var r,s,o,a,c,d;return u(this,(function(u){switch(u.label){case 0:return te(i("string",e)&&i("string",t,!0)).throw(X.invalidParameters),r=x.of(this._iid),s=r.sdkState,o=r.cacheContext,a=r.connectionManager,c=n.errorForOtherUser,s.userId&&s.userId!==e?c?[3,2]:[4,a.logout()]:[3,3];case 1:return u.sent(),[3,3];case 2:throw c;case 3:return u.trys.push([3,5,,6]),[4,this.initializeCache(e)];case 4:return u.sent(),x.of(this._iid).dispatcher.dispatch(new _t),[3,6];case 5:return u.sent(),d=x.of(this._iid).logger,o.localCacheEnabled=!1,d.warn("Cache initialization failed - cache is not available."),[3,6];case 6:return[2]}}))}))},t.prototype.authenticateFeed=function(e,t){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this.authenticate(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.authenticate=function(e,t,n){var r;return void 0===n&&(n=ee.SESSION_TOKEN),a(this,void 0,void 0,(function(){var i,s,o;return u(this,(function(a){switch(a.label){case 0:return i=x.of(this._iid),s=i.sessionManager,o=i.connectionManager,[4,this._ready(e,t,{errorForOtherUser:o.isConnected?X.alreadyConnectedAsAnotherUser:void 0})];case 1:return a.sent(),(null===(r=s.session.services)||void 0===r?void 0:r.includes(we.CHAT))?[3,3]:(s.handler||t&&n!==ee.ACCESS_TOKEN||this.setSessionHandler(new nt),[4,s.authenticate(e,t)]);case 2:a.sent(),a.label=3;case 3:return[2,this.currentUser]}}))}))},t.prototype.connect=function(e,t){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this._ready(e,t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,x.of(this._iid).connectionManager.connect(t)];case 3:return n.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},t.prototype.reconnect=function(){var e=x.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.session.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},t.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._internalDisconnect()];case 1:return e.sent(),[2]}}))}))},t.prototype.disconnectWebSocket=function(){return a(this,void 0,void 0,(function(){var e,t,n;return u(this,(function(r){switch(r.label){case 0:return e=x.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket(!0)];case 1:return r.sent(),[2]}}))}))},t.prototype.setBackgroundState=function(){var e=x.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background().catch((function(e){r.debug("setBackgroundState error = ",e)})))},t.prototype.setForegroundState=function(){var e=x.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.dispatcher,i=e.logger;"background"===n.appState&&(n.appState="foreground",i.debug("going foreground state"),t.resetAndReconnect().catch((function(e){i.debug("setForgroundState error = ",e)})),r.dispatch(new wt))},t.prototype.setSessionHandler=function(e){te(e instanceof nt).throw(X.invalidParameters),x.of(this._iid).sessionManager.handler=e},t.prototype.addUserEventHandler=function(e,t){te(i("string",e)&&t instanceof Ze).throw(X.invalidParameters),x.of(this._iid).userEventHandlers.set(e,t)},t.prototype.removeUserEventHandler=function(e){x.of(this._iid).userEventHandlers.delete(e)},t.prototype.removeAllUserEventHandler=function(){x.of(this._iid).userEventHandlers.clear()},t.prototype.addConnectionHandler=function(e,t){te(i("string",e)&&t instanceof $e).throw(X.invalidParameters),x.of(this._iid).connectionHandlers.set(e,t)},t.prototype.removeConnectionHandler=function(e){x.of(this._iid).connectionHandlers.delete(e)},t.prototype.removeAllConnectionHandler=function(){x.of(this._iid).connectionHandlers.clear()},t.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new Xe(this._iid,e)},t.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new Ye(this._iid,e)},t.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new et(this._iid,e)},t.prototype.createMessageSearchQuery=function(e){return new tt(this._iid,e)},t.prototype.createPollListQuery=function(e){return new ne(this._iid,w({},e))},t.prototype.createPollVoterListQuery=function(e){return new re(this._iid,w({},e))},t.prototype.buildUserFromSerializedData=function(e){var t=ie(e);return new _(this._iid,_.payloadify(t))},t.prototype.updateCurrentUserInfo=function(t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var n,r,s,o,a,c,d;return u(this,(function(u){switch(u.label){case 0:return n=w(w({},Ct),t),te(function(t){return e(t.profileImage,!0)&&i("string",t.profileUrl,!0)&&i("string",t.nickname,!0)}(n)).throw(X.invalidParameters),this.currentUser?(r=x.of(this._iid),s=r.sdkState,o=r.requestQueue,a=new At(w({userId:s.userId},n)),[4,o.send(a)]):[3,2];case 1:return c=u.sent(),d=c.as(Nt).user,this.currentUser&&(n.nickname&&(this.currentUser.nickname=d.nickname),(n.profileUrl||n.profileImage)&&(this.currentUser.plainProfileUrl=d.profileUrl)),[2,d];case 2:throw X.connectionRequired}}))}))},t.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,s,o;return u(this,(function(a){switch(a.label){case 0:return te(ye("string",e)).throw(X.invalidParameters),this.currentUser?(t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new At({userId:n.userId,preferredLanguages:e}),[4,r.send(i)]):[3,2];case 1:return s=a.sent(),o=s.as(Nt).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw X.connectionRequired}}))}))},t.prototype.registerFCMPushTokenForCurrentUser=function(e,t){var n,r;return a(this,void 0,void 0,(function(){var s,o,c,d,l,h,f=this;return u(this,(function(p){switch(p.label){case 0:if(te(i("string",e)&&i("string",null==t?void 0:t.deviceManufacturer,!0)).throw(X.invalidParameters),(null==t?void 0:t.deviceOS)&&te(Se(Ie,t.deviceOS.platform,!0)&&i("string",t.deviceOS.version,!0)).throw(X.invalidParameters),!this.currentUser)return[3,6];s={deviceOS:"".concat((null===(n=null==t?void 0:t.deviceOS)||void 0===n?void 0:n.platform)||Ie.ANDROID,"-").concat((null===(r=null==t?void 0:t.deviceOS)||void 0===r?void 0:r.version)||"unknown"),deviceManufacturer:null==t?void 0:t.deviceManufacturer,systemPushEnabled:null==t?void 0:t.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),o=x.of(this._iid),c=o.sessionManager,d=o.sdkState,l=o.requestQueue,c.hasDeviceToken(k.FCM,e)?[2,ke.SUCCESS]:(h=new Lt({userId:d.userId,token:e,deviceOS:s.deviceOS,deviceManufacturer:s.deviceManufacturer,systemPushEnabled:s.systemPushEnabled}),[4,l.send(h)]);case 2:return p.sent(),[4,se((function(){return a(f,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return c.setDeviceToken(k.FCM,e,s),[4,c.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return p.sent(),this._fcmPushToken="",[2,ke.SUCCESS];case 4:return p.sent(),[2,ke.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,ke.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s,o,c,d=this;return u(this,(function(l){switch(l.label){case 0:if(te(i("string",e)).throw(X.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),t=x.of(this._iid),n=t.sessionManager,r=t.sdkState,s=t.requestQueue,o=new zt({userId:r.userId,token:e}),[4,s.send(o)];case 2:return c=l.sent().lastDeletedAt,[4,se((function(){return a(d,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return n.unsetDeviceToken(k.FCM,e),n.setDeviceTokenDeletedAt(c),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._fcmPushToken="",[2,ke.SUCCESS];case 4:return l.sent(),[2,ke.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,ke.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,s,o=this;return u(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=x.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,i=new jt({userId:n.userId}),[4,r.send(i)]):[3,3];case 1:return s=c.sent().lastDeletedAt,[4,se((function(){return a(o,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(k.FCM),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.registerAPNSPushTokenForCurrentUser=function(e,t){var n,r;return a(this,void 0,void 0,(function(){var s,o,c,d,l,h,f=this;return u(this,(function(p){switch(p.label){case 0:if(te(i("string",e)&&i("string",null==t?void 0:t.deviceManufacturer,!0)).throw(X.invalidParameters),(null==t?void 0:t.deviceOS)&&te(Se(Ie,t.deviceOS.platform,!0)&&i("string",t.deviceOS.version,!0)).throw(X.invalidParameters),!this.currentUser)return[3,6];s={deviceOS:"".concat((null===(n=null==t?void 0:t.deviceOS)||void 0===n?void 0:n.platform)||Ie.IOS,"-").concat((null===(r=null==t?void 0:t.deviceOS)||void 0===r?void 0:r.version)||"unknown"),deviceManufacturer:null==t?void 0:t.deviceManufacturer,systemPushEnabled:null==t?void 0:t.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),o=x.of(this._iid),c=o.sessionManager,d=o.sdkState,l=o.requestQueue,c.hasDeviceToken(k.APNS,e)?[2,ke.SUCCESS]:(h=new Mt({userId:d.userId,token:e,deviceOS:s.deviceOS,deviceManufacturer:s.deviceManufacturer,systemPushEnabled:s.systemPushEnabled}),[4,l.send(h)]);case 2:return p.sent(),[4,se((function(){return a(f,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return c.setDeviceToken(k.APNS,e,s),[4,c.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return p.sent(),this._apnsPushToken="",[2,ke.SUCCESS];case 4:return p.sent(),[2,ke.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,ke.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s,o,c,d=this;return u(this,(function(l){switch(l.label){case 0:if(te(i("string",e)).throw(X.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),t=x.of(this._iid),n=t.sessionManager,r=t.sdkState,s=t.requestQueue,o=new Rt({userId:r.userId,token:e}),[4,s.send(o)];case 2:return c=l.sent().lastDeletedAt,[4,se((function(){return a(d,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return n.unsetDeviceToken(k.APNS,e),n.setDeviceTokenDeletedAt(c),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._apnsPushToken="",[2,ke.SUCCESS];case 4:return l.sent(),[2,ke.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,ke.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,s,o=this;return u(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=x.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,i=new Qt({userId:n.userId}),[4,r.send(i)]):[3,3];case 1:return s=c.sent().lastDeletedAt,[4,se((function(){return a(o,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(k.APNS),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.markPushNotificationAsDelivered=function(e,t){var n;return void 0===t&&(t=!0),a(this,void 0,void 0,(function(){var r,i,s,o,a,c,d,l,h,f,p,v,g,m,b,_,y,w,k;return u(this,(function(u){switch(u.label){case 0:if(r=x.of(this._iid),i=r.logger,s=r.sessionManager,o=r.requestQueue,a=r.pushNotificationAckManager,i.debug("markPushNotificationAsDelivered:",e),c=kn.DELIVERED,d=a.parseData(e),l=d.pushTrackingId,h=d.sessionTopics,f=d.sessionKey,p=d.messageId,v=d.channelKey,g=d.templateKey,m=d.notificationEventDeadline,!f)throw i.info("Can't use markPushNotificationAsDelivered() feature."),X.malformedDataError;if(!h.includes(Ce.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsDelivered() feature."),X.malformedDataError;if(a.isAcked(l,c))return i.info("already delivered push notification:",l),[2];b=Boolean(v),_=t&&b,y=null===(n=s.deviceTokens[0])||void 0===n?void 0:n.token,w=new An({deviceToken:null!=y?y:"",pushTrackingId:l,eventType:c,messageId:p,channelKey:v,templateKey:g,notificationEventDeadline:m,allowedPushNotification:_}),f&&(w.headers["Session-Key"]=f),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.send(w)];case 2:return u.sent(),a.markAsAcked(l,c),[3,4];case 3:throw k=u.sent(),i.debug("failed to mark push notification as delivered. push tracking id: ".concat(l,". error: ").concat(k)),k;case 4:return[2]}}))}))},t.prototype.markPushNotificationAsClicked=function(e){var t;return a(this,void 0,void 0,(function(){var n,r,i,s,o,a,c,d,l,h,f,p,v,g,m,b,_;return u(this,(function(u){switch(u.label){case 0:if(n=x.of(this._iid),r=n.logger,i=n.sessionManager,s=n.requestQueue,o=n.pushNotificationAckManager,r.debug("markPushNotificationAsClicked:",e),a=kn.CLICKED,c=o.parseData(e),d=c.pushTrackingId,l=c.sessionTopics,h=c.sessionKey,f=c.messageId,p=c.channelKey,v=c.templateKey,g=c.notificationEventDeadline,!h)throw r.info("Can't use markPushNotificationAsClicked() feature."),X.malformedDataError;if(!l.includes(Ce.PUSH_ACKNOWLEDGEMENT))throw r.info("Can't use markPushNotificationAsClicked() feature."),X.malformedDataError;if(o.isAcked(d,a))return r.info("already clicked push notification:",d),[2];m=null===(t=i.deviceTokens[0])||void 0===t?void 0:t.token,b=new An({deviceToken:null!=m?m:"",pushTrackingId:d,eventType:a,messageId:f,channelKey:p,templateKey:v,notificationEventDeadline:g}),h&&(b.headers["Session-Key"]=h),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,s.send(b)];case 2:return u.sent(),o.markAsAcked(d,a),[3,4];case 3:throw _=u.sent(),r.debug("failed to mark push notification as clicked. push tracking id: ".concat(d,". error: ").concat(_)),_;case 4:return[2]}}))}))},t.prototype.getChannelInvitationPreference=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return e=x.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new xt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,{autoAccept:i.as(Ht).autoAccept}]}}))}))},t.prototype.setChannelInvitationPreference=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s,o;return u(this,(function(a){switch(a.label){case 0:return te(i("boolean",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,s=new Kt({userId:n.userId,willAutoAccept:e}),[4,r.send(s)];case 1:return o=a.sent(),[2,{autoAccept:o.as(Gt).autoAccept}]}}))}))},t.prototype.getDoNotDisturb=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return e=x.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Wt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(Vt).preference]}}))}))},t.prototype.setDoNotDisturb=function(e,t,n,r,s,o){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=""),a(this,void 0,void 0,(function(){var a,c,d,l,h;return u(this,(function(u){switch(u.label){case 0:return te(i("boolean",e)&&i("number",t)&&i("number",n)&&i("number",r)&&i("number",s)&&i("string",o)).throw(X.invalidParameters),a=x.of(this._iid),c=a.sdkState,d=a.requestQueue,l=new Bt({userId:c.userId,doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:s,timezone:o}),[4,d.send(l)];case 1:return h=u.sent(),[2,h.as(Jt).preference]}}))}))},t.prototype.getSnoozePeriod=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return e=x.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Zt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as($t).snoozePeriod]}}))}))},t.prototype.setSnoozePeriod=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),a(this,void 0,void 0,(function(){var r,s,o,a,c;return u(this,(function(u){switch(u.label){case 0:return te(i("boolean",e)&&i("number",t)&&i("number",n)).throw(X.invalidParameters),r=x.of(this._iid),s=r.sdkState,o=r.requestQueue,a=new Xt({userId:s.userId,snoozeOn:e,startTs:t,endTs:n}),[4,o.send(a)];case 1:return c=u.sent(),[2,c.as(Yt).snoozePeriod]}}))}))},t.prototype.getMyPushTokensByToken=function(e,t){return a(this,void 0,void 0,(function(){var n,r,s,o,a,c,d,l,h,f,p,v;return u(this,(function(u){switch(u.label){case 0:return te(i("string",e)&&Se(k,t)).throw(X.invalidParameters),n=x.of(this._iid),r=n.sdkState,s=n.requestQueue,o=n.sessionManager,a=new Ft({userId:r.userId,type:t,token:e}),[4,s.send(a)];case 1:c=u.sent(),d=c.as(qt).pushTokens;try{for(l=Y(d.deviceTokens),h=l.next();!h.done;h=l.next())f=h.value,o.setDeviceToken(d.type,f)}catch(e){p={error:e}}finally{try{h&&!h.done&&(v=l.return)&&v.call(l)}finally{if(p)throw p.error}}return[4,o.saveDeviceToken()];case 2:return u.sent(),[2,d]}}))}))},t.prototype.getPushTriggerOption=function(){return a(this,void 0,void 0,(function(){var e,t,n,r;return u(this,(function(i){switch(i.label){case 0:return e=x.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new nn({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(rn).pushTriggerOption]}}))}))},t.prototype.setPushTriggerOption=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return te(Se(Ee,e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new sn({userId:n.userId,pushTriggerOption:e}),[4,r.send(i)];case 1:return[2,s.sent().as(on).pushTriggerOption]}}))}))},t.prototype.getPushTemplate=function(){return a(this,void 0,void 0,(function(){var e,t,n,r;return u(this,(function(i){switch(i.label){case 0:return e=x.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new an({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(un).name]}}))}))},t.prototype.setPushTemplate=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return te(Se(Te,e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new cn({userId:n.userId,templateName:e}),[4,r.send(i)];case 1:return[2,s.sent().as(dn).name]}}))}))},t.prototype.blockUser=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s;return u(this,(function(o){switch(o.label){case 0:return te(e instanceof _||i("string",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,s=new en({userId:n.userId,blockedUserId:e instanceof _?e.userId:e}),[4,r.send(s)];case 1:return o.sent(),[2]}}))}))},t.prototype.blockUserWithUserId=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.blockUser(e)]}))}))},t.prototype.unblockUser=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s;return u(this,(function(o){switch(o.label){case 0:return te(e instanceof _||i("string",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,s=new tn({userId:n.userId,unblockedUserId:e instanceof _?e.userId:e}),[4,r.send(s)];case 1:return o.sent(),[2]}}))}))},t.prototype.unblockUserWithUserId=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.unblockUser(e)]}))}))},t.prototype.getFriendChangeLogsByToken=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s,o;return u(this,(function(a){switch(a.label){case 0:return te(i("string",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,s=new ln({userId:n.userId,token:e}),[4,r.send(s)];case 1:return o=a.sent(),[2,o.as(hn).changelogs]}}))}))},t.prototype.getAllowFriendDiscovery=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return e=x.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new _n({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(yn).allowFriendDiscovery]}}))}))},t.prototype.setAllowFriendDiscovery=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s;return u(this,(function(o){switch(o.label){case 0:return te(i("boolean",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,s=new wn({userId:n.userId,allowFriendDiscovery:e}),[4,r.send(s)];case 1:return o.sent(),[2,e]}}))}))},t.prototype.uploadFriendDiscoveries=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return u(this,(function(o){switch(o.label){case 0:return t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new fn({userId:n.userId,discoveries:e}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(pn).friendDiscoveryRequestId]}}))}))},t.prototype.deleteFriendDiscovery=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},t.prototype.deleteFriendDiscoveries=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return te(ye("string",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new vn({userId:n.userId,discoveryKeys:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.addFriends=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return u(this,(function(o){switch(o.label){case 0:return te(ye("string",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new gn({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(mn).users]}}))}))},t.prototype.deleteFriend=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.deleteFriends([e])]}))}))},t.prototype.deleteFriends=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return u(this,(function(s){switch(s.label){case 0:return te(ye("string",e)).throw(X.invalidParameters),t=x.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new bn({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.getAllEmoji=function(){return a(this,void 0,void 0,(function(){var e,t,n;return u(this,(function(r){switch(r.label){case 0:return e=x.of(this._iid).requestQueue,t=new Sn,[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(In).emojiContainer]}}))}))},t.prototype.getEmojiCategory=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return u(this,(function(i){switch(i.label){case 0:return t=x.of(this._iid).requestQueue,n=new Cn({categoryId:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(En).emojiCategory]}}))}))},t.prototype.getEmoji=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return u(this,(function(i){switch(i.label){case 0:return t=x.of(this._iid).requestQueue,n=new Tn({key:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(Pn).emoji]}}))}))},t.prototype.getUIKitConfiguration=function(){return a(this,void 0,void 0,(function(){var e,t,n,r;return u(this,(function(i){switch(i.label){case 0:return e=x.of(this._iid),te(e.hasExtension("sb_uikit")).throw(X.notSupportedError),t=e.requestQueue,n=new Dn,[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(Un).uikitConfiguration]}}))}))},t.prototype.getReportCategoryInfoList=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,x.of(this._iid).reportCategoryManager.categories()];case 1:return[2,e.sent()]}}))}))},t}();export{kt as Emoji,St as EmojiCategory,It as EmojiContainer,Nn as default};
